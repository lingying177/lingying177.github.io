<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="Linux, HTML, PWN, PowerShell, Web, Python, linux">
    <meta name="description" content="热爱生活，注重过程">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>Linux | kylin小小鱼</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css">
	<script src="https://cdn.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/autoload.js"></script>
    <script src="/libs/jquery/jquery.min.js"></script>
	
    
<style type="text/css" lang="css">
    #loading-container{
        position: fixed;
        top: 0;
        left: 0;
        min-height: 100vh;
        width: 100vw;
        z-index: 9999;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        background: #FFF;
        text-align: center;
        /* loader页面消失采用渐隐的方式*/
        -webkit-transition: opacity 1s ease;
        -moz-transition: opacity 1s ease;
        -o-transition: opacity 1s ease;
        transition: opacity 1s ease;
    }
    .loading-image{
        width: 120px;
        height: 50px;
        transform: translate(-50%);
    }

    .loading-image div:nth-child(2) {
        -webkit-animation: pacman-balls 1s linear 0s infinite;
        animation: pacman-balls 1s linear 0s infinite
    }

    .loading-image div:nth-child(3) {
        -webkit-animation: pacman-balls 1s linear .33s infinite;
        animation: pacman-balls 1s linear .33s infinite
    }

    .loading-image div:nth-child(4) {
        -webkit-animation: pacman-balls 1s linear .66s infinite;
        animation: pacman-balls 1s linear .66s infinite
    }

    .loading-image div:nth-child(5) {
        -webkit-animation: pacman-balls 1s linear .99s infinite;
        animation: pacman-balls 1s linear .99s infinite
    }

   .loading-image div:first-of-type {
        width: 0;
        height: 0;
        border: 25px solid #49b1f5;
        border-right-color: transparent;
        border-radius: 25px;
        -webkit-animation: rotate_pacman_half_up .5s 0s infinite;
        animation: rotate_pacman_half_up .5s 0s infinite;
    }
    .loading-image div:nth-child(2) {
        width: 0;
        height: 0;
        border: 25px solid #49b1f5;
        border-right-color: transparent;
        border-radius: 25px;
        -webkit-animation: rotate_pacman_half_down .5s 0s infinite;
        animation: rotate_pacman_half_down .5s 0s infinite;
        margin-top: -50px;
    }
    @-webkit-keyframes rotate_pacman_half_up {0% {transform: rotate(270deg)}50% {transform: rotate(1turn)}to {transform: rotate(270deg)}}

    @keyframes rotate_pacman_half_up {0% {transform: rotate(270deg)}50% {transform: rotate(1turn)}to {transform: rotate(270deg)}}

    @-webkit-keyframes rotate_pacman_half_down {0% {transform: rotate(90deg)}50% {transform: rotate(0deg)}to {transform: rotate(90deg)}}

    @keyframes rotate_pacman_half_down {0% {transform: rotate(90deg)}50% {transform: rotate(0deg)}to {transform: rotate(90deg)}}

    @-webkit-keyframes pacman-balls {75% {opacity: .7}to {transform: translate(-100px, -6.25px)}}

    @keyframes pacman-balls {75% {opacity: .7}to {transform: translate(-100px, -6.25px)}}


    .loading-image div:nth-child(3),
    .loading-image div:nth-child(4),
    .loading-image div:nth-child(5),
    .loading-image div:nth-child(6){
        background-color: #49b1f5;
        width: 15px;
        height: 15px;
        border-radius: 100%;
        margin: 2px;
        width: 10px;
        height: 10px;
        position: absolute;
        transform: translateY(-6.25px);
        top: 25px;
        left: 100px;
    }
    .loading-text{
        margin-bottom: 20vh;
        text-align: center;
        color: #2c3e50;
        font-size: 2rem;
        box-sizing: border-box;
        padding: 0 10px;
        text-shadow: 0 2px 10px rgba(0,0,0,0.2);
    }
    @media only screen and (max-width: 500px) {
         .loading-text{
            font-size: 1.5rem;
         }
    }
    .fadeout {
        opacity: 0;
        filter: alpha(opacity=0);
    }
    /* logo出现动画 */
    @-webkit-keyframes fadeInDown{0%{opacity:0;-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0)}100%{opacity:1;-webkit-transform:none;transform:none}}
    @keyframes fadeInDown{0%{opacity:0;-webkit-transform:translate3d(0,-100%,0);}}
 </style>
 <script>
(function () {
    const loaded = function(){
       setTimeout(function(){
            const loader = document.getElementById("loading-container");
            loader.className="fadeout" ;//使用渐隐的方法淡出loading page
            // document.getElementById("body-wrap").style.display="flex";
            setTimeout(function(){
                loader.style.display="none";
            },1000); 
        },1000);//强制显示loading page 1s  
    };
    loaded();
})()
 </script><meta name="generator" content="Hexo 4.2.0"><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"><style type="text/css" lang="css">
    #loading-container{
        position: fixed;
        top: 0;
        left: 0;
        min-height: 100vh;
        width: 100vw;
        z-index: 9999;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        background: #FFF;
        text-align: center;
        /* loader页面消失采用渐隐的方式*/
        -webkit-transition: opacity 1s ease;
        -moz-transition: opacity 1s ease;
        -o-transition: opacity 1s ease;
        transition: opacity 1s ease;
    }
    .loading-image{
        width: 120px;
        height: 50px;
        transform: translate(-50%);
    }

    .loading-image div:nth-child(2) {
        -webkit-animation: pacman-balls 1s linear 0s infinite;
        animation: pacman-balls 1s linear 0s infinite
    }

    .loading-image div:nth-child(3) {
        -webkit-animation: pacman-balls 1s linear .33s infinite;
        animation: pacman-balls 1s linear .33s infinite
    }

    .loading-image div:nth-child(4) {
        -webkit-animation: pacman-balls 1s linear .66s infinite;
        animation: pacman-balls 1s linear .66s infinite
    }

    .loading-image div:nth-child(5) {
        -webkit-animation: pacman-balls 1s linear .99s infinite;
        animation: pacman-balls 1s linear .99s infinite
    }

   .loading-image div:first-of-type {
        width: 0;
        height: 0;
        border: 25px solid #49b1f5;
        border-right-color: transparent;
        border-radius: 25px;
        -webkit-animation: rotate_pacman_half_up .5s 0s infinite;
        animation: rotate_pacman_half_up .5s 0s infinite;
    }
    .loading-image div:nth-child(2) {
        width: 0;
        height: 0;
        border: 25px solid #49b1f5;
        border-right-color: transparent;
        border-radius: 25px;
        -webkit-animation: rotate_pacman_half_down .5s 0s infinite;
        animation: rotate_pacman_half_down .5s 0s infinite;
        margin-top: -50px;
    }
    @-webkit-keyframes rotate_pacman_half_up {0% {transform: rotate(270deg)}50% {transform: rotate(1turn)}to {transform: rotate(270deg)}}

    @keyframes rotate_pacman_half_up {0% {transform: rotate(270deg)}50% {transform: rotate(1turn)}to {transform: rotate(270deg)}}

    @-webkit-keyframes rotate_pacman_half_down {0% {transform: rotate(90deg)}50% {transform: rotate(0deg)}to {transform: rotate(90deg)}}

    @keyframes rotate_pacman_half_down {0% {transform: rotate(90deg)}50% {transform: rotate(0deg)}to {transform: rotate(90deg)}}

    @-webkit-keyframes pacman-balls {75% {opacity: .7}to {transform: translate(-100px, -6.25px)}}

    @keyframes pacman-balls {75% {opacity: .7}to {transform: translate(-100px, -6.25px)}}


    .loading-image div:nth-child(3),
    .loading-image div:nth-child(4),
    .loading-image div:nth-child(5),
    .loading-image div:nth-child(6){
        background-color: #49b1f5;
        width: 15px;
        height: 15px;
        border-radius: 100%;
        margin: 2px;
        width: 10px;
        height: 10px;
        position: absolute;
        transform: translateY(-6.25px);
        top: 25px;
        left: 100px;
    }
    .loading-text{
        margin-bottom: 20vh;
        text-align: center;
        color: #2c3e50;
        font-size: 2rem;
        box-sizing: border-box;
        padding: 0 10px;
        text-shadow: 0 2px 10px rgba(0,0,0,0.2);
    }
    @media only screen and (max-width: 500px) {
         .loading-text{
            font-size: 1.5rem;
         }
    }
    .fadeout {
        opacity: 0;
        filter: alpha(opacity=0);
    }
    /* logo出现动画 */
    @-webkit-keyframes fadeInDown{0%{opacity:0;-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0)}100%{opacity:1;-webkit-transform:none;transform:none}}
    @keyframes fadeInDown{0%{opacity:0;-webkit-transform:translate3d(0,-100%,0);}}
 </style>
 <script>
(function () {
    const loaded = function(){
       setTimeout(function(){
            const loader = document.getElementById("loading-container");
            loader.className="fadeout" ;//使用渐隐的方法淡出loading page
            // document.getElementById("body-wrap").style.display="flex";
            setTimeout(function(){
                loader.style.display="none";
            },1000); 
        },1000);//强制显示loading page 1s  
    };
    loaded();
})()
 </script></head>



 <div id="loading-container">
     <p class="loading-text">玩命加载中 . . . </p> 
     <div class="loading-image">
         <div></div>
         <div></div>
         <div></div>
         <div></div> 
         <div></div>
     </div>
 </div><body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">kylin小小鱼</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>

<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">kylin小小鱼</div>
        <div class="logo-desc">
            
            热爱生活，注重过程
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
    </ul>
</div>

        </div>

        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/12.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">Linux</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        height: calc(100vh - 250px);
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #toc-content .is-active-link::before {
        background-color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/Linux/">
                                <span class="chip bg-color">Linux</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/Linux/" class="post-category">
                                Linux
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2020-03-26
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp;
                    2020-04-21
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    24k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    92 分
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>

        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <h3 id="1-Linux简单学习"><a href="#1-Linux简单学习" class="headerlink" title="1. Linux简单学习"></a>1. Linux简单学习</h3><hr>
<h4 id="1-1-Linux安装与VMware使用"><a href="#1-1-Linux安装与VMware使用" class="headerlink" title="1.1 Linux安装与VMware使用"></a>1.1 Linux安装与VMware使用</h4><hr>
<h5 id="1-1-1-Linux的不同界面"><a href="#1-1-1-Linux的不同界面" class="headerlink" title="1.1.1 Linux的不同界面"></a>1.1.1 Linux的不同界面</h5><ul>
<li>Ctrl+alt+F1~F6：切换不同的界面</li>
<li>进入图形界面：startx（有时不加x）</li>
<li>使用exit 注销账户，然后切换其他用户 </li>
</ul>
<hr>
<h4 id="1-2-Linux的命令规范：command-option-parameter1-…"><a href="#1-2-Linux的命令规范：command-option-parameter1-…" class="headerlink" title="1.2 Linux的命令规范：command [-option] parameter1  …"></a>1.2 Linux的命令规范：command [-option] parameter1  …</h4><ul>
<li>command [-option] parameter1  parameter2 …</li>
<li>命令          选项   参数1          参数2</li>
<li>一个“-”使用简写；两个“–”使用全名</li>
<li>命令、选项、参数之间用空格分开（不管有多少空格都视为一个空格）</li>
<li>命令太长时可以用转义字符 \t、\b等来转义回车键</li>
<li>回车键代表命令执行</li>
<li>命令的大小写不同，不是同一个命令</li>
</ul>
<hr>
<h5 id="1-2-1-Linux基础命令操作"><a href="#1-2-1-Linux基础命令操作" class="headerlink" title="1.2.1 Linux基础命令操作"></a>1.2.1 Linux基础命令操作</h5><ul>
<li>ls     ：显示列表</li>
<li>date ：显示时间日期</li>
<li>cal   ：显示日历</li>
<li>bc   ：计算器（+加、-减、* 乘、/除、^指数、%取余）</li>
<li>which：查看命令所在路径</li>
</ul>
<h5 id="1-2-2-几种经常使用的快捷键"><a href="#1-2-2-几种经常使用的快捷键" class="headerlink" title="1.2.2 几种经常使用的快捷键"></a>1.2.2 几种经常使用的快捷键</h5><p>Ctrl+C：终止（中断当前程序）<br>Ctrl+D：键盘输入结束、exit退出<br>Tab（一次不行按两次）：命令补全，文件补齐，参数补齐</p>
<p>Ctrl+u：光标处删除到首</p>
<p>Ctrl+k：光标处删除到尾</p>
<p>Ctrl+a：光标移动到首</p>
<hr>
<h4 id="1-3-系统帮助命令"><a href="#1-3-系统帮助命令" class="headerlink" title="1.3 系统帮助命令"></a>1.3 系统帮助命令</h4><h5 id="1-3-1-help-：可用于查看命令"><a href="#1-3-1-help-：可用于查看命令" class="headerlink" title="1.3.1 --help ：可用于查看命令"></a>1.3.1 <code>--help</code> ：可用于查看命令</h5><ul>
<li>Usage：执行命令的语法</li>
<li>后面是具体参数的介绍</li>
</ul>
<h5 id="1-3-2-man：可用于查看命令和文件格式"><a href="#1-3-2-man：可用于查看命令和文件格式" class="headerlink" title="1.3.2 man：可用于查看命令和文件格式"></a>1.3.2 <code>man</code>：可用于查看命令和文件格式</h5><p> <strong>1）.man命令中第一行DATE(1~9)的含义</strong></p>
<table>
<thead>
<tr>
<th>代码</th>
<th>代表内容</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td><u><strong>用户在shell环境中可以操作的命令</strong></u></td>
</tr>
<tr>
<td>2</td>
<td>系统内核可调用的函数与工具</td>
</tr>
<tr>
<td>3</td>
<td>一些常用的函数（function）与函数库（library），大部分为C的函数库</td>
</tr>
<tr>
<td>4</td>
<td>设备文件的说明，通常在/dev下的文件</td>
</tr>
<tr>
<td>5</td>
<td><u><strong>配置文件或是某些文件的格式</strong></u></td>
</tr>
<tr>
<td>6</td>
<td>游戏</td>
</tr>
<tr>
<td>7</td>
<td>惯例与协议</td>
</tr>
<tr>
<td>8</td>
<td><u><strong>系统管理员可用的管理命令</strong></u></td>
</tr>
<tr>
<td>9</td>
<td>跟内核有关的文件</td>
</tr>
</tbody></table>
<p><strong>2）.命令的介绍（每个区域的意思）</strong></p>
<table>
<thead>
<tr>
<th>代号</th>
<th>内容说明</th>
</tr>
</thead>
<tbody><tr>
<td>NAME</td>
<td>简短的命令，数据名称的说明</td>
</tr>
<tr>
<td>SYNOPSIS</td>
<td>简短的命令语法（syntax）简介</td>
</tr>
<tr>
<td>DESCRIPTION</td>
<td>较为完整的说明</td>
</tr>
<tr>
<td>OPTIONS</td>
<td>针对SYNOPSIS部分中，有列举的所有选项的说明</td>
</tr>
<tr>
<td>COMMANDS</td>
<td>当这个程序在执行时，可以在此程序中执行的命令</td>
</tr>
<tr>
<td>FILES</td>
<td>这个程序或数据所使用或参考或链接到的某些文件</td>
</tr>
<tr>
<td>SEE ALSO</td>
<td>可以参考跟这个数据或命令有关的其他说明</td>
</tr>
<tr>
<td>EXAMPLES</td>
<td>一些可以参考的范例</td>
</tr>
</tbody></table>
<ul>
<li>CONFIGURATION：配置</li>
<li>ENVIRONMENT：与命令相关的环境参数说明</li>
<li>AUTHOR：作者</li>
<li>COPYRIGHT：版权</li>
</ul>
<p><strong>3）. man命令常用的快捷键</strong></p>
<table>
<thead>
<tr>
<th>按键</th>
<th>进行工作</th>
</tr>
</thead>
<tbody><tr>
<td>空格键</td>
<td>向下翻一页</td>
</tr>
<tr>
<td>[page down]</td>
<td>向下翻一页</td>
</tr>
<tr>
<td>[page up]</td>
<td>向上翻一页</td>
</tr>
<tr>
<td>[home]</td>
<td>去到第一页</td>
</tr>
<tr>
<td>[end]</td>
<td>去到最后一页</td>
</tr>
<tr>
<td>/string</td>
<td>向下查找string这个字符串</td>
</tr>
<tr>
<td>?string</td>
<td>向上查找string这个字符串</td>
</tr>
<tr>
<td>n,N</td>
<td>利用/或?来查找字符串时，可以用n来继续下一个查找，利用N来进行反向查找</td>
</tr>
<tr>
<td>q</td>
<td>结束这次man page查找</td>
</tr>
<tr>
<td>上下左右</td>
<td>一行一行翻页</td>
</tr>
</tbody></table>
<p><strong>4）.附man命令的使用选项：</strong></p>
<ul>
<li><p>man -f  （命令） ：等同于whatis，查找与命令相关的文件</p>
</li>
<li><p>man -k  （关键词)  ：等同于apropos，搜索存在关键词的手册概述并显示所有匹配结果</p>
</li>
<li><p>whatis：查看命令帮助信息所在的路径</p>
<p>5）.&lt;&gt;：必选项</p>
</li>
</ul>
<p><strong>5）.一些符号的使用说明：</strong></p>
<ul>
<li>&lt;&gt;：必选项</li>
<li>[]  ：可选项</li>
<li>…  ：可以使用多个参数</li>
<li>|   ：多选一</li>
<li>()   ：分组（没有实际意义）</li>
</ul>
<h5 id="1-3-3-info"><a href="#1-3-3-info" class="headerlink" title="1.3.3 info"></a>1.3.3 <code>info</code></h5><p>将文件数据拆分成一个一个的段落，每个段落用自己的页面编写，并且在各个界面中还有类似网页的超链接来调到各不同的界面中，每个独立的界面也被成为一个节点（前提：该文件必须用info的格式写）</p>
<p><strong>info命令常用的快捷键</strong></p>
<table>
<thead>
<tr>
<th>按键</th>
<th>进行工作</th>
</tr>
</thead>
<tbody><tr>
<td>空格键</td>
<td>向下翻一页</td>
</tr>
<tr>
<td>[page down]</td>
<td>向下翻一页</td>
</tr>
<tr>
<td>[page up]</td>
<td>向上翻一页</td>
</tr>
<tr>
<td>[Tab]</td>
<td>在节点之间移动（有节点的地方，通常以*显示）</td>
</tr>
<tr>
<td>[Enter]</td>
<td>当光标在节点上面时，按下enter可进入该节点</td>
</tr>
<tr>
<td>b</td>
<td>移动光标到该info界面当中的第一处</td>
</tr>
<tr>
<td>e</td>
<td>移动光标到该info界面的最后一个节点处</td>
</tr>
<tr>
<td>n</td>
<td>前往下一个节点处</td>
</tr>
<tr>
<td>p</td>
<td>前往上一个节点处</td>
</tr>
<tr>
<td>u</td>
<td>向上移动一层</td>
</tr>
<tr>
<td>s（/）</td>
<td>在info page中进行查找</td>
</tr>
<tr>
<td>h,?</td>
<td>显示帮助选项</td>
</tr>
<tr>
<td>q</td>
<td>退出info</td>
</tr>
</tbody></table>
<h5 id="注：其他有用的说明文件放在-usr-share-doc-目录下。"><a href="#注：其他有用的说明文件放在-usr-share-doc-目录下。" class="headerlink" title="注：其他有用的说明文件放在/usr/share/doc/目录下。"></a>注：其他有用的说明文件放在/usr/share/doc/目录下。</h5><h5 id="1-3-4-type-：查看命令是内部命令还是外部命令"><a href="#1-3-4-type-：查看命令是内部命令还是外部命令" class="headerlink" title="1.3.4 type ：查看命令是内部命令还是外部命令"></a>1.3.4 type ：查看命令是内部命令还是外部命令</h5><h5 id="1-3-5-help：用来查看内部命令的帮助信息"><a href="#1-3-5-help：用来查看内部命令的帮助信息" class="headerlink" title="1.3.5 help：用来查看内部命令的帮助信息"></a>1.3.5 help：用来查看内部命令的帮助信息</h5><h3 id="2-Linux的基础学习"><a href="#2-Linux的基础学习" class="headerlink" title="2. Linux的基础学习"></a>2. Linux的基础学习</h3><h4 id="2-1-文件权限与目录配置"><a href="#2-1-文件权限与目录配置" class="headerlink" title="2.1 文件权限与目录配置"></a>2.1 文件权限与目录配置</h4><h5 id="2-1-1-文件属性、文件权限"><a href="#2-1-1-文件属性、文件权限" class="headerlink" title="2.1.1 文件属性、文件权限"></a>2.1.1 文件属性、文件权限</h5><p>使用 <code>ls -al</code> 列出文件及其属性</p>
<ul>
<li>属性（依次序）：【权限】【链接】【拥有者】【用户组】【文件容量】【修改日期】【文件名】</li>
<li>权限一共有10位（共4组）</li>
<li>使用<strong>file 命令</strong>来查看这个文件的类型</li>
</ul>
<table>
<thead>
<tr>
<th>权限位</th>
<th>代表的含义</th>
</tr>
</thead>
<tbody><tr>
<td>第1位（d、-、l、b、c、s、p）</td>
<td>d:目录；-：普通文件；l：链接文件；b：可存储设备；c：键盘鼠标；s：套接字文件；p：命名管道（<strong>使用file 命令来查看这个文件的类型</strong>）</td>
</tr>
<tr>
<td>第2,3,4位</td>
<td>文件拥有者的权限</td>
</tr>
<tr>
<td>第5,6,7位</td>
<td>文件拥有者所在用户组的权限</td>
</tr>
<tr>
<td>第8,9,10位</td>
<td>非文件拥有者所在用户组的人的权限（陌生人的权限）</td>
</tr>
</tbody></table>
<h5 id="2-1-2-文件权限rwx的代表数字"><a href="#2-1-2-文件权限rwx的代表数字" class="headerlink" title="2.1.2 文件权限rwx的代表数字"></a>2.1.2 文件权限rwx的代表数字</h5><table>
<thead>
<tr>
<th>文件权限</th>
<th>代表数字</th>
</tr>
</thead>
<tbody><tr>
<td>r</td>
<td>4</td>
</tr>
<tr>
<td>w</td>
<td>2</td>
</tr>
<tr>
<td>x</td>
<td>1</td>
</tr>
</tbody></table>
<h5 id="2-1-3-文件权限的修改命令-chown、chgrp、chmod"><a href="#2-1-3-文件权限的修改命令-chown、chgrp、chmod" class="headerlink" title="2.1.3 文件权限的修改命令 chown、chgrp、chmod"></a>2.1.3 文件权限的修改命令 <code>chown、chgrp、chmod</code></h5><ul>
<li>chgrp    [-R] ：修改用户所属用户组<ul>
<li>chgrp   用户组    文件/目录   ：  修改用户组</li>
</ul>
</li>
<li>chown   [-R] ：修改文件拥有者<ul>
<li>chown  –regerence=a.txt  b.txt    复制a的权限到b上</li>
<li>chown  [-R]  账号名称:用户组名称  文件或目录</li>
<li>chown  [-R]  用户名   文件/目录    ：修改属主【递归修改】</li>
<li>chown  [-R]   .用户组     ：修改用户组</li>
<li>chown  [-R]   :用户组     ：修改用户组</li>
<li>chown  [-R]    用户名:用户组     ：修改用户名和用户组</li>
</ul>
</li>
<li>chmod   [-R] ：修改文件的权限（SUID、SGID、SBIT等）<ul>
<li><code>chmod [augo] [+-=] [rwx] filename</code></li>
<li>数字类型修改权限：chmod  [-R]  xyz  文件或目录    （xyz就是rwx属性数字的相加，例如 r+w=6 ）</li>
<li>符号类型修改权限：chmod  [-R]  a=rwx,u=rwx,g=rwx,o=rwx  文件名或目录  </li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>命令</th>
<th>身份</th>
<th>修改方式</th>
<th>权限</th>
<th>文件名</th>
</tr>
</thead>
<tbody><tr>
<td><code>chmod</code></td>
<td>a（所有人），u（用户拥有者），g（文件组），o（其他人）</td>
<td>+，-，=</td>
<td>r，w，x</td>
<td>filename</td>
</tr>
</tbody></table>
<h5 id="2-1-4-目录与文件的权限不同"><a href="#2-1-4-目录与文件的权限不同" class="headerlink" title="2.1.4 目录与文件的权限不同"></a>2.1.4 目录与文件的权限不同</h5><ul>
<li>Linux下一个文件到底能不能执行，跟后面的扩展名没有关系，而是具不具备x权限</li>
</ul>
<table>
<thead>
<tr>
<th>组件</th>
<th>内容</th>
<th>r</th>
<th>w</th>
<th>x</th>
</tr>
</thead>
<tbody><tr>
<td>文件</td>
<td>详细数据</td>
<td>读到文件内容</td>
<td>修改文件内容</td>
<td>执行文件内容</td>
</tr>
<tr>
<td>目录</td>
<td>文件名</td>
<td>读到文件名</td>
<td>修改文件名</td>
<td>进入该目录的权限</td>
</tr>
</tbody></table>
<h4 id="2-2-Linux目录介绍"><a href="#2-2-Linux目录介绍" class="headerlink" title="2.2 Linux目录介绍"></a>2.2 Linux目录介绍</h4><h5 id="2-2-1-简单区别"><a href="#2-2-1-简单区别" class="headerlink" title="2.2.1 简单区别"></a>2.2.1 简单区别</h5><table>
<thead>
<tr>
<th></th>
<th>可分享</th>
<th>不可分享</th>
</tr>
</thead>
<tbody><tr>
<td>不变（static）</td>
<td>/usr（软件存放处）</td>
<td>/etc（配置文件）</td>
</tr>
<tr>
<td></td>
<td>/opt（第三方辅助软件）</td>
<td>/boot（启动与内核文件）</td>
</tr>
<tr>
<td>可变动（variable）</td>
<td>/var/mail（用户邮箱）</td>
<td>/var/run（程序相关）</td>
</tr>
<tr>
<td></td>
<td>/var/spool/news（新闻组）</td>
<td>/var/lock（程序相关）</td>
</tr>
</tbody></table>
<h5 id="2-2-2-具体目录"><a href="#2-2-2-具体目录" class="headerlink" title="2.2.2 具体目录"></a>2.2.2 具体目录</h5><h4 id="2-3-目录概念及相关讲解"><a href="#2-3-目录概念及相关讲解" class="headerlink" title="2.3 目录概念及相关讲解"></a>2.3 目录概念及相关讲解</h4><h5 id="2-3-1-目录与路径"><a href="#2-3-1-目录与路径" class="headerlink" title="2.3.1 目录与路径"></a>2.3.1 目录与路径</h5><ul>
<li>相对路径：相对于当前目录写起</li>
<li>绝对路径：从根目录写起</li>
</ul>
<h5 id="2-3-2-目录的相关操作"><a href="#2-3-2-目录的相关操作" class="headerlink" title="2.3.2 目录的相关操作"></a>2.3.2 目录的相关操作</h5><table>
<thead>
<tr>
<th>目录</th>
<th>代表</th>
</tr>
</thead>
<tbody><tr>
<td>.</td>
<td>当前目录</td>
</tr>
<tr>
<td>..</td>
<td>上一层目录</td>
</tr>
<tr>
<td>-</td>
<td>前一个工作目录</td>
</tr>
<tr>
<td>~</td>
<td>目前使用者所在的家目录</td>
</tr>
<tr>
<td>~account</td>
<td>代表account这个使用者的家目录</td>
</tr>
</tbody></table>
<h5 id="2-3-3-执行文件路径的变量：-PATH"><a href="#2-3-3-执行文件路径的变量：-PATH" class="headerlink" title="2.3.3 执行文件路径的变量：$PATH"></a>2.3.3 <u><strong>执行文件路径的变量：$PATH</strong></u></h5><p>path 变量由一堆目录组成，每个目录用“<strong>:</strong>”隔开</p>
<ul>
<li>将一个目录加入系统环境变量：<strong><code>PARH = &quot; ${PATH}:/目录名（绝对路径）&quot;</code></strong>`</li>
<li>不建议将本目录“.”加入路径（很危险）</li>
</ul>
<h5 id="2-3-4-处理目录的命令"><a href="#2-3-4-处理目录的命令" class="headerlink" title="2.3.4 处理目录的命令"></a>2.3.4 处理目录的命令</h5><ul>
<li><code>cd</code> ：切换目录 （配合上面的目录代表符号）</li>
<li><code>pwd  [-p]</code>：显示当前目录（-p显示真正的目录而不是链接）</li>
<li><code>mkdir  [-m  -p]</code>：建立一个新目录（-m设置权限，-p进行递归创建）</li>
<li><code>rmdir [-p]</code>：删除一个<strong>空</strong>目录（-p递归删除）</li>
<li><code>basename</code>：获取文件名</li>
<li><code>dirname</code>：获取目录</li>
</ul>
<h4 id="2-4-常用命令及介绍"><a href="#2-4-常用命令及介绍" class="headerlink" title="2.4 常用命令及介绍"></a>2.4 <strong><u>常用命令及介绍</u></strong></h4><h5 id="ls、cp、rm、mv"><a href="#ls、cp、rm、mv" class="headerlink" title="ls、cp、rm、mv"></a><code>ls、cp、rm、mv</code></h5><ul>
<li><code>ls -aAdfFhilnrRSt</code>  文件名或目录</li>
<li><code>cp -adfilprsu</code>  源文件  目标文件</li>
<li><code>rm -fir</code>  文件或目录</li>
<li><code>mv -fiu  source1  source2  source3  ...  directory</code></li>
<li><code>file</code> ：显示文件类型（d - c s p l b )</li>
</ul>
<table>
<thead>
<tr>
<th>命令</th>
<th>介绍</th>
<th>可带参数</th>
</tr>
</thead>
<tbody><tr>
<td>ls</td>
<td>查看</td>
<td>-a：显示所有文件；-d：仅列出目录本身；-l：详细信息显示（可以使用alias转换别名）</td>
</tr>
<tr>
<td>cp</td>
<td>复制</td>
<td>-a：文件的权限信息都复制；-i：覆盖前进行询问；-p：连同属性（权限、用户、时间）一起复制（不使用默认的）；-r：递归复制；-l：硬链接；-s：软连接；-b：新复制的文件名后加～</td>
</tr>
<tr>
<td>rm</td>
<td>删除</td>
<td>-f：强力删除文件；-I：删除前询问；-r：递归删除（很危险）</td>
</tr>
<tr>
<td>mv</td>
<td>移动(重命名)</td>
<td>-f：强制移动；-i：询问是否覆盖；-u：更新文件；-b ：先对原文件备份～；-t：将多个文件移动到一个目录（mv  -t  目录 文件1  文件2）</td>
</tr>
<tr>
<td>file</td>
<td>查看类型</td>
<td>-b：显示结果时，不显示文件名；-c：显示file是如何判断文件类型的；-i：输出mime类型的字符串；-z：显示压缩文件的内容；-L：查看软连接对应的文件类型；-f：查看文件中文件名的类型</td>
</tr>
</tbody></table>
<h5 id="cat：查看文件内容-tac：逆向查看文件（从最后开始）"><a href="#cat：查看文件内容-tac：逆向查看文件（从最后开始）" class="headerlink" title="cat：查看文件内容    tac：逆向查看文件（从最后开始）"></a><code>cat</code>：查看文件内容    tac：逆向查看文件（从最后开始）</h5><table>
<thead>
<tr>
<th>命令</th>
<th>可用参数</th>
<th>使用说明</th>
</tr>
</thead>
<tbody><tr>
<td>cat</td>
<td>-A = -vET</td>
<td>其他命令的集合</td>
</tr>
<tr>
<td></td>
<td>-b；-n</td>
<td>列出行号（仅列出有字的）；列出行号（包含空白行）</td>
</tr>
<tr>
<td></td>
<td>-E；-v；-T</td>
<td>显示换行符$；显示特殊字符；用^I显示[tab]</td>
</tr>
<tr>
<td>cat  &gt;  文件名 &lt;&lt;EOF</td>
<td>输出重定向</td>
<td>将键盘输入的内容添加的文件中，以输入EOF为结束</td>
</tr>
<tr>
<td>cat  &gt;&gt; 文件名 &lt;&lt;EOF</td>
<td>追加重定向</td>
<td>向文件中追加数据，以输入EOF为结束</td>
</tr>
<tr>
<td>cat 文件1  文件2  &gt;   文件3</td>
<td>合并重定向</td>
<td>将文件1 文件2 的内容合并到文件3中</td>
</tr>
</tbody></table>
<h5 id="nl：添加行号打印"><a href="#nl：添加行号打印" class="headerlink" title="nl：添加行号打印"></a><code>nl</code>：添加行号打印</h5><table>
<thead>
<tr>
<th>命令</th>
<th>可用参数</th>
<th>使用说明</th>
</tr>
</thead>
<tbody><tr>
<td>nl</td>
<td>-b  a;  -b  t</td>
<td>全部列出行号；空行不列出行号</td>
</tr>
<tr>
<td></td>
<td>-n  ln;-n  rn;-n  rz</td>
<td>行号在最左方显示；行号在最右方显示且不加0；行号在最右方显示且加0</td>
</tr>
<tr>
<td></td>
<td>-w</td>
<td>行号栏位占用的字符数</td>
</tr>
</tbody></table>
<h5 id="more-与less-：查看文件-（一页一页查看）（常在管道中使用）"><a href="#more-与less-：查看文件-（一页一页查看）（常在管道中使用）" class="headerlink" title="more 与less ：查看文件 （一页一页查看）（常在管道中使用）"></a><code>more</code> 与<code>less</code> ：查看文件 （一页一页查看）（常在管道中使用）</h5><table>
<thead>
<tr>
<th>命令</th>
<th>按键</th>
</tr>
</thead>
<tbody><tr>
<td>more</td>
<td>空格键：向下翻页(屏)；Ctrl+ f：向下翻一页(屏)；enter：向下翻一行；/字符串：查找字符串；:f ：显示文件名以及目前的行数；b：往回翻页；q：立即离开</td>
</tr>
<tr>
<td></td>
<td>v：调用vi编辑器；!command：调用shell命令（与在命令行一样）</td>
</tr>
<tr>
<td></td>
<td>+ number  ：从第几行显示文件</td>
</tr>
<tr>
<td>less</td>
<td>空格键：向下翻页；[page down ]：向下翻页；[page up]：向上翻页；/字符串：向下查找；?字符串：向上查找；n：重复前一个查找；N：反向重复前一个查找；g：前进到这个数据的第一行；G：前进到这个数据的最后一行；q：离开</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody></table>
<h5 id="head-tail-：查看n行"><a href="#head-tail-：查看n行" class="headerlink" title="head /tail  ：查看n行"></a><code>head /tail</code>  ：查看n行</h5><table>
<thead>
<tr>
<th>命令</th>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>head（从前开始）</td>
<td>-数字  number  文件名</td>
<td>显示（数字）行(默认是10行)</td>
</tr>
<tr>
<td>tail （反向）</td>
<td>-数字  number  文件名</td>
<td>显示（数字）行</td>
</tr>
<tr>
<td></td>
<td>-f  number</td>
<td>持续刷新文件的内容</td>
</tr>
</tbody></table>
<h5 id="od-：查看非文本文件的的内容"><a href="#od-：查看非文本文件的的内容" class="headerlink" title="od ：查看非文本文件的的内容"></a><code>od</code> ：查看非文本文件的的内容</h5><ul>
<li>-t    a：默认字符；</li>
<li>-t    c：ascii码；    C（放在type中间进行数制的对比）  </li>
<li>-t    d[size]：利用十进制输出，每个整数用size bytes    例：od  -t  oCc  文件名  </li>
<li>-t     f[size]：浮点数制</li>
<li>-t     o[size]：八进制</li>
<li>-t     x[size]：、八进制、十六进制</li>
</ul>
<h5 id="mkdir-：创建目录"><a href="#mkdir-：创建目录" class="headerlink" title="mkdir ：创建目录"></a><code>mkdir</code> ：创建目录</h5><ul>
<li>-m：设置权限     //不设置这个参数时，默认权限是 755</li>
<li>-p ：递归创建</li>
<li>-v ：显示</li>
<li>mkdir   -p   a/{b,c,d}   ：递归创建a目录，在a目录下创建b，c，d同级目录（使用花括号的作用）</li>
<li>mkdir  -p  {a,b}-{c,d}    ：会创建a-c,b-c,a-d,b-d等4个目录</li>
</ul>
<h5 id="touch：创建新文件或修改文件时间："><a href="#touch：创建新文件或修改文件时间：" class="headerlink" title="touch：创建新文件或修改文件时间："></a><code>touch</code>：创建新文件或修改文件时间：</h5><ul>
<li>-a ： 修改访问时间  </li>
<li>-c ：不会创建文件，仅修改文件的时间  </li>
<li>-d ：用指定的日期创建/修改新文件的日期，不使用系统时间    </li>
<li>-t  ：用指定格式的时间戳创建新文件，不使用系统时间    </li>
<li>-m ：修改mtime</li>
</ul>
<p>*<em>注意：mkdir和touch创建的目录或文件的权限受到 umask的影响，详细信息查看 2.5.1 *</em></p>
<h5 id="tree-：（-ls-R）查看目录树"><a href="#tree-：（-ls-R）查看目录树" class="headerlink" title="tree ：（= ls -R）查看目录树"></a><code>tree</code> ：（= ls -R）查看目录树</h5><h5 id="which-：查找命令所在路径"><a href="#which-：查找命令所在路径" class="headerlink" title="which ：查找命令所在路径"></a><code>which</code> ：查找命令所在路径</h5><ul>
<li>[-a]：找出所有的而不仅仅是第一个</li>
</ul>
<h5 id="whereis：查找命令所在路径、源代码文件、帮助信息文件所在的目录"><a href="#whereis：查找命令所在路径、源代码文件、帮助信息文件所在的目录" class="headerlink" title="whereis：查找命令所在路径、源代码文件、帮助信息文件所在的目录"></a><code>whereis</code>：查找命令所在路径、源代码文件、帮助信息文件所在的目录</h5><ul>
<li><p>-b  ：查找命令所在路径</p>
</li>
<li><p>-s   ：源代码文件</p>
</li>
<li><p>-m ：只显示帮助信息所在的位置</p>
</li>
</ul>
<h5 id="locate-locatedb：建立数据库，方便快速查找"><a href="#locate-locatedb：建立数据库，方便快速查找" class="headerlink" title="locate/locatedb：建立数据库，方便快速查找"></a><code>locate/locatedb</code>：建立数据库，方便快速查找</h5><ul>
<li>updatedb</li>
<li>locate  [文件或命令]</li>
</ul>
<h5 id="find-：查找文件"><a href="#find-：查找文件" class="headerlink" title="find ：查找文件"></a><code>find</code> ：查找文件</h5><ul>
<li>find   [path]   [option]  [option]</li>
<li>-exec    …   ;</li>
</ul>
<h4 id="2-5-文件的隐藏属性"><a href="#2-5-文件的隐藏属性" class="headerlink" title="2.5 文件的隐藏属性"></a><strong>2.5 文件的隐藏属性</strong></h4><h5 id="2-5-1-默认属性查看：umask"><a href="#2-5-1-默认属性查看：umask" class="headerlink" title="2.5.1　默认属性查看：umask"></a>2.5.1　默认属性查看：<code>umask</code></h5><ul>
<li>里面的数字代表需要减掉的权限（默认是022）</li>
<li>umask  022 ：代表只拿掉其他人的w权限</li>
</ul>
<p>#####　2.5.2　隐藏属性的查看及修改  <code>chattr</code></p>
<ul>
<li><p><code>chattr</code>  配置文件的默认属性</p>
</li>
<li><p>chattr  [+-=]  [ASacdistu]  文件或目录</p>
</li>
</ul>
<p>第二参数介绍：</p>
<ul>
<li>A：不修改atime</li>
<li>a：文件只能增加数据，不能删除数据【root】</li>
<li>i ：不能增加、删除、改名、设置链接、写入【root】</li>
<li>s：删除时会彻底删除，不能恢复<ul>
<li>u：与s相反</li>
</ul>
</li>
</ul>
<ul>
<li><p><code>lsattr</code> 显示文件隐藏属性</p>
<ul>
<li><code>lsattr -[adR]</code>  文件或目录</li>
<li>-a：将隐藏文件的隐藏属性也显示</li>
<li>-d：如果后面接目录，仅将目录的属性显示，不显示里面的文件的</li>
<li>-R：与-d相反，递归显示子目录的数据属性</li>
</ul>
</li>
<li><p><strong>/、 /dev/ 、 /tmp/ 、 /var/ 、 /etc/  不受chattr保护</strong>   </p>
</li>
</ul>
<h5 id="2-5-3-文件的特殊权限：SUID、SGID、SBIT"><a href="#2-5-3-文件的特殊权限：SUID、SGID、SBIT" class="headerlink" title="2.5.3　文件的特殊权限：SUID、SGID、SBIT"></a>2.5.3　文件的特殊权限：<code>SUID、SGID、SBIT</code></h5><h3 id="3-磁盘与文件系统"><a href="#3-磁盘与文件系统" class="headerlink" title="3. 磁盘与文件系统"></a>3. 磁盘与文件系统</h3><h4 id="3-1-磁盘"><a href="#3-1-磁盘" class="headerlink" title="3.1 磁盘"></a>3.1 磁盘</h4><h5 id="3-1-1-磁盘组成结构："><a href="#3-1-1-磁盘组成结构：" class="headerlink" title="3.1.1 磁盘组成结构："></a>3.1.1 磁盘组成结构：</h5><ul>
<li>盘片：存储时每个盘片平均存储（如有100k数据存储在4盘片的磁盘上，则每个盘片存储25k）</li>
<li>磁头、轴、马达</li>
</ul>
<h5 id="3-1-2-磁盘逻辑结构"><a href="#3-1-2-磁盘逻辑结构" class="headerlink" title="3.1.2 磁盘逻辑结构"></a>3.1.2 磁盘逻辑结构</h5><ul>
<li>磁道：盘片以轴为中心组成的同心圆</li>
<li>扇区：磁道被分为多个扇区</li>
<li>柱面：不同盘片上相同编号的磁道组成柱面</li>
</ul>
<h5 id="3-1-3-磁盘延时"><a href="#3-1-3-磁盘延时" class="headerlink" title="3.1.3  磁盘延时"></a>3.1.3  磁盘延时</h5><ul>
<li>因磁头不能立刻到达目的位置，移动时会有延迟</li>
<li>磁头悬浮在盘片上</li>
</ul>
<h5 id="3-1-4-磁盘分区格式化"><a href="#3-1-4-磁盘分区格式化" class="headerlink" title="3.1.4  磁盘分区格式化"></a>3.1.4  磁盘分区格式化</h5><p>常见文件系统：FAT32  NTFS  EXT2  EXT3  EXT4  XFS等（内核的功能）</p>
<ul>
<li>低级格式化：</li>
<li>高级格式化：分区装入文件系统</li>
<li>MBR：主引导记录，位于0磁道0柱面1扇区，512字节，分为3部分<ul>
<li><strong>446字节的<code>boot loader</code></strong>（启动加载器，存放引导代码）</li>
<li><strong>64字节磁盘分区表</strong></li>
<li><strong>2字节<code>majic  number</code></strong>（检查MBR是否有效）</li>
</ul>
</li>
<li>主分区（最多4个）：<strong>主分区+扩展分区 &lt;= 4</strong><ul>
<li>扩展分区：16字节，只能有一个，扩展分区是一个指针，指向磁盘另外的位置，不能直接存储数据</li>
<li>逻辑分区：多的只能是逻辑分区</li>
</ul>
</li>
</ul>
<h4 id="3-2-文件系统"><a href="#3-2-文件系统" class="headerlink" title="3.2  文件系统"></a>3.2  文件系统</h4><p>文件系统：一套软件（XFS、NTFS、FAT、EXT3、EXT4等），存储数据或文件的一种格式，文件系统不存在于分区上，位于磁盘的某一个位置；文件系统把分区分割成两部分，一部分存放元数据，另一部分存放真正的数据</p>
<h5 id="3-2-1特性："><a href="#3-2-1特性：" class="headerlink" title="3.2.1特性："></a>3.2.1特性：</h5><ul>
<li><p>matedata ：元数据（与数据本身并没有关系，包括的是数据属性，比如数据归属，数据权限，数据的时间戳）</p>
</li>
<li><p>iNode：（index node）记录文件的属性，一个文件占用一个iNode，同时记录此文件的数据所在的区块号码</p>
</li>
<li><p>超级区块（super block）：记录此文件系统的整体信息，包括iNode与数据区块的总量、使用量、剩余量，以及文件系统的格式与相关信息。</p>
</li>
<li><p>数据区块（block）：实际记录文件的内容，若文件过大时，会占用多个区块。</p>
</li>
<li><p>block bitmap：在元数据区域，标记数据块是否被使用</p>
</li>
<li><p>读取规则：用户读取文件时，先找到文件的iNode，然后分析iNode所记录的权限与用户是否符合，若符合才能够读取文件内容</p>
</li>
</ul>
<h5 id="3-2-2-文件操作"><a href="#3-2-2-文件操作" class="headerlink" title="3.2.2  文件操作"></a>3.2.2  文件操作</h5><ul>
<li>删除文件：把数据对应的inode和block的值变为0，实际数据并没有删除</li>
<li>新建文件：</li>
<li>复制文件：重新建立新文件（新建inode等）</li>
<li>移动文件：改变inode和block的值，对数据没有操作（在同一个文件系统中是这样，若为不同文件系统，则会创建新文件然后删除旧文件）</li>
<li>链接文件：<ul>
<li>创建语法：<code>ln [-s  -v]  src_file  dst_file</code>    不加任何参数就是创建硬链接<ul>
<li>-s  ：创建软连接</li>
<li>-v  ：显示详细过程</li>
</ul>
</li>
<li>硬链接：  inode相同，指向的是同一个数据文件（同一个inode可以指向多个文件）源文件被删除时，不会影响到新文件（只能在文件系统中进行硬链接，<strong>只能对文件进行硬链接</strong>）</li>
<li>软连接： <code>ln  -s</code>：<strong>注意必须使用绝对路径</strong>，指向的是一个路径，文件大小是字符串（路径）的个数，源文件被删除时，会影响新文件，因为新文件指向的是一个路径，路径中的那个文件没有了自然会受到影响。（方便跨文件系统，可对目录操作）<ul>
<li>注意：删除软连接目录时，不要在最后加 <code>/</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="3-3-设备文件-dev"><a href="#3-3-设备文件-dev" class="headerlink" title="3.3  设备文件  /dev/"></a>3.3  设备文件  /dev/</h4><p><code>mknod  [option] NAME TYPE [MAJOR  MINOR]</code>：创建设备</p>
<ul>
<li>-m  设置权限  </li>
</ul>
<h5 id="3-3-1-块设备：b"><a href="#3-3-1-块设备：b" class="headerlink" title="3.3.1  块设备：b"></a>3.3.1  块设备：b</h5><img src="F:\Individual File\于召勇\typora note\Linux及编程\image-linux\设备文件.png" style="zoom:60%;" />

<ul>
<li>左边那列  （MAJOR）8  代表主设备号</li>
<li>右边那列（MINOR） 1，2 ，3 代表次设备号，次设备号分别代表分区</li>
</ul>
<p>接口标识：IDE  ATA  :  hd  、  SATA  :  sd  、SCSI  :  sd  、USB  :  sd</p>
<p>Linux以<strong>字母</strong>标识磁盘的个数：a：第一块、b：第二块  ……</p>
<p>Linux用<strong>数字</strong>标识分区：1-4 标识主分区，逻辑分区从5开始</p>
<h5 id="3-3-2-字符设备：c"><a href="#3-3-2-字符设备：c" class="headerlink" title="3.3.2  字符设备：c"></a>3.3.2  字符设备：c</h5><h4 id="3-4-格式化"><a href="#3-4-格式化" class="headerlink" title="3.4  格式化"></a>3.4  格式化</h4><ul>
<li>低级格式化：划分磁道</li>
<li>高级格式化：为分区装载文件系统</li>
<li>文件系统：内核功能。常见：FAT32 NTFS EXT2 EXT3 EXT4 XFS等</li>
<li>mkfs ：（make file system） 创建文件系统（格式化）<ul>
<li>-t:指定文件系统</li>
<li><code>mkfs  -t  ext3  dev_name</code></li>
</ul>
</li>
</ul>
<p>VFS ：虚拟文件系统。Linux内核的内容，类似于一个库，在这一<strong>层</strong>上兼容  其他的文件系统</p>
<h5 id="3-4-1-命令"><a href="#3-4-1-命令" class="headerlink" title="3.4.1  命令"></a>3.4.1  命令</h5><ul>
<li><p>fdisk：针对MBR分区类型的工具</p>
<ul>
<li><p>fdisk -l  查看磁盘列表、<code>cat /proc/partitons</code>也可以查看设备及分区 </p>
</li>
<li><p>fdisk  /dev/sda  ：会进入<strong>fdisk的交互模式</strong></p>
<ul>
<li>d:删除一个分区</li>
</ul>
</li>
</ul>
</li>
<li><p>1:显示linux支持的分区类型（磁盘ID）</p>
<ul>
<li><p>5:扩展分区</p>
</li>
<li><p>82:交换分区</p>
<ul>
<li>83: linux系统分区</li>
</ul>
</li>
<li><p>8e: LVM 逻辑卷管理</p>
<ul>
<li>m:显示帮助信息</li>
</ul>
</li>
</ul>
</li>
<li><p>n:创建一个新分区</p>
<ul>
<li>p:创建主分区</li>
</ul>
</li>
<li><p>e:创建扩展分区</p>
<ul>
<li>p:显示当前分区列表</li>
</ul>
</li>
<li><p>q:不保存退出</p>
<ul>
<li>w:保存更改并退出</li>
</ul>
</li>
<li><p>t:更改分区的系统ID</p>
</li>
</ul>
<p>Centos6:按照柱面分区</p>
<p>Centos7:按照扇区分区|</p>
<ul>
<li>gdisk：针对GPT分区类型的工具<ul>
<li><strong>强制使用gpt安装：在点击install centos linux 7之前，按 tab键，然后在下面输入  inst.gpt，然后回车，即可强制使用gpt格式安装。</strong></li>
</ul>
</li>
</ul>
<h4 id="3-5-挂载"><a href="#3-5-挂载" class="headerlink" title="3.5 挂载"></a>3.5 挂载</h4><h5 id="3-5-1-命令"><a href="#3-5-1-命令" class="headerlink" title="3.5.1 命令"></a>3.5.1 命令</h5><ul>
<li><p><code>mount</code>：显示系统中挂载的所有设备  </p>
</li>
<li><p><code>mount dev_name /path</code>：path必须是空文件夹  </p>
</li>
<li><p><code>blkid</code>：查看设备的UUID 号</p>
</li>
<li><p>mkswap ：创建swap交换分区</p>
<ul>
<li>swapon   dev_name：开启某个分区</li>
<li>swapoff   dev_name：关闭某个分区</li>
</ul>
</li>
</ul>
<h5 id="3-5-2-开机自动挂载"><a href="#3-5-2-开机自动挂载" class="headerlink" title="3.5.2 开机自动挂载"></a>3.5.2 开机自动挂载</h5><ul>
<li><p>/etc/fstab文件：修改这个文件即可实现开机挂载</p>
<p>UUID    挂载点    type(文件系统)    default   0(是否检查)  0(是否备份)</p>
</li>
</ul>
<h5 id="3-5-3-卸载"><a href="#3-5-3-卸载" class="headerlink" title="3.5.3 卸载"></a>3.5.3 卸载</h5><ul>
<li><code>umonut dev_name</code></li>
</ul>
<h3 id="4-shell"><a href="#4-shell" class="headerlink" title="4.shell"></a>4.shell</h3><ul>
<li>shell启动后—&gt;&gt;进程：使用PID号进行区分，（在系统中，一个进程只认为自己存在）</li>
<li>父shell与子shell相互独立（父子shell之间环境相互独立）</li>
<li><code>cat  /etc/shells/</code>：查看当前系统所支持的shell程序</li>
</ul>
<h4 id="4-1bash特性："><a href="#4-1bash特性：" class="headerlink" title="4.1bash特性："></a>4.1bash特性：</h4><h5 id="4-1-1命令历史：-bash-history"><a href="#4-1-1命令历史：-bash-history" class="headerlink" title="4.1.1命令历史：.bash_history"></a>4.1.1命令历史：.bash_history</h5><ul>
<li>history：<ul>
<li>-d：删除历史命令（history  -d  第几行(开始)    [连续几行]</li>
<li>-c：清空当前内存的命令历史</li>
<li>-w：将命令历史保存到某个文件中</li>
<li>使用技巧：<ul>
<li>!n：执行命令历史中的第n行命令</li>
<li>!-n：执行命令历史中的倒数第n行命令</li>
<li>!word：执行命令历史中最近一次的Word命令</li>
<li>!!：执行上一条命令</li>
<li>!$：引用运行的这个命令的之前所用过的最后一个参数</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>​                   ESC键（按完松开）. 键（按完松开）</p>
<h5 id="4-1-2-管道，IO重定向："><a href="#4-1-2-管道，IO重定向：" class="headerlink" title="4.1.2 管道，IO重定向：|"></a>4.1.2 管道，IO重定向：|</h5><ul>
<li>计算机体系结构：<ul>
<li>控制器：CPU</li>
<li>运算器：CPU</li>
<li>存储器：RAM：内存</li>
<li>输入设备：（input）：键盘、鼠标</li>
<li>输出设备：（output）：屏幕、打印机</li>
</ul>
</li>
<li>计算机总线：<ul>
<li>地址总线：负责内存寻址</li>
<li>数据总线：负责传输数据</li>
<li>控制总线：负责控制指令</li>
</ul>
</li>
<li>寄存器：CPU中内部临时存储空间</li>
<li>I/O设备：负责计算机内部存储设备和外部存储设备（硬盘、光盘）</li>
<li>程序：指令+数据<ul>
<li>指令：有程序提供，负责加工数据</li>
<li>数据：系统中数据可以有多个数据来源，比如来自变量、文件、输入设备</li>
</ul>
</li>
<li>标准输入输出设备：<ul>
<li>标准输入设备：键盘（stdin），文件描述符：0</li>
<li>标准输出设备：显示器（stdout），文件描述符：1</li>
<li>标准错误输出设备：显示器（stderr），文件描述符：2</li>
</ul>
</li>
<li>三种数据流：<ul>
<li>标准输入数据流 / 标准输出数据流 / 标准错误输出流</li>
</ul>
</li>
<li>当在Linux中打开一个文件时，内核会反复调用，对于文件标识就很重要，用文件描述符来标识文件，文件加载完用数字标识 ：fd（file descriptor）</li>
</ul>
<p>IO重定向：把默认输入输出来源，重新定向到其他的文件或设备：</p>
<ul>
<li>输出重定向：<ul>
<li>&gt;：覆盖输出重定向</li>
<li>&gt;&gt;：追加输出重定向</li>
<li>2&gt;：错误覆盖输出重定向</li>
<li>2&gt;&gt;：错误追加输出重定向</li>
<li>&amp;&gt;：混合覆盖输出重定向</li>
<li>&amp;&gt;&gt;：混合追加输出重定向</li>
</ul>
</li>
<li>输入重定向：<ul>
<li>&lt;：输入重定向</li>
</ul>
</li>
<li><code>|</code>（管道）：连接多条命令，把前一条命令的输出结果作为后一条命令的输入条件<ul>
<li>格式：command1  |  command2  |  command3  |   …..</li>
<li>思路：北京 、河北保定、河北大学、 找  2018级 计算机系   3班  张三  （组合小程序，完成实现大功能）</li>
<li>tr命令：实现字符转换：tr   ’a-z‘  ’A-Z‘</li>
<li>tee命令：把数据重定向到给定文件和屏幕上</li>
<li>管道使用例子：cat  /etc/passwd  |  tr   ‘a-z’   ‘A-Z’</li>
</ul>
</li>
</ul>
<h5 id="4-1-2扩展——-重定向的具体讲解"><a href="#4-1-2扩展——-重定向的具体讲解" class="headerlink" title="4.1.2扩展—— 重定向的具体讲解"></a>4.1.2扩展—— 重定向的具体讲解</h5><h6 id="1-文件描述符"><a href="#1-文件描述符" class="headerlink" title="1.文件描述符"></a>1.文件描述符</h6><ul>
<li><p><strong>linux文件描述符</strong>：可以理解为linux跟踪打开文件，而分配的一个数字，这个数字有点类似c语言操作文件时候的句柄，通过句柄就可以实现文件的读写操作。 </p>
</li>
<li><p>三个默认的文件描述符</p>
<ul>
<li>标准输入：standard input 0   （默认设备键盘）</li>
<li>标准输出：standard output 1（默认设备显示器）</li>
<li>错误输出：error output 2       （默认设备显示器）</li>
</ul>
</li>
<li><p><strong>注意：</strong></p>
<p>（1）以后再打开文件，描述符可以依次增加<br>（2）一条shell命令，都会继承其父进程的文件描述符，因此所有的shell命令，都会默认有三个文件描述符。</p>
<p>（3） 文件所有输入输出都是由该进程所有打开的文件描述符控制的。（Linux一切皆文件，就连键盘显示器设备都是文件，因此他们的输入输出也是由文件描述符控制） </p>
<p>（4） 一条命令执行以前先会按照默认的情况进行绑定（也就是上面所说的 0,1,2），如果我们有时候需要让输出不显示在显示器上，而是输出到文件或者其他设备，那我们就需要重定向。 </p>
<p>（5）下面的学习注意理解重定向的含义。将标准的重定向到自定义的。</p>
</li>
</ul>
<h6 id="2-重定向"><a href="#2-重定向" class="headerlink" title="2.重定向"></a>2.重定向</h6><ul>
<li><p>输入重定向 ：<code>&lt;</code>、 <code>&lt;&lt;</code></p>
</li>
<li><p>输出重定向 ：<code>&gt;</code>、 <code>&gt;&gt;</code></p>
</li>
<li><p>注意：此处涉及到shell的解析原理，仅做简单介绍</p>
<ul>
<li>bash 在执行一条指令的时候，首先<strong>会检查命令中存不存在重定向</strong>的符号，如果存在那么首先将文件描述符重定向（之前说过了，输入输出操作都是依赖文件描述符实现的，重定向输入输出本质上就是重定向文件描述符），<strong>然后再把重定向去掉，执行指令</strong> </li>
<li>如果指令中存在多个重定向，那么不要随便改变顺序，因为重定向是从左向右解析的，改变顺序可能会带来完全不同的结果</li>
<li><code>&lt;</code> 是对标准输入 0 重定向 ，<code>&gt;</code> 是对标准输出 1 重定向 </li>
<li>再强调一下， <strong>重定向就是针对文件描述符的操作</strong> </li>
</ul>
</li>
</ul>
<h6 id="3-输入重定向"><a href="#3-输入重定向" class="headerlink" title="3.输入重定向"></a>3.输入重定向</h6><ul>
<li><p>格式： <code>[n]&lt; file</code>：n是文件描述符。<strong>[]与&lt;之间没有空格</strong></p>
</li>
<li><p>说明：将文件描述符 n 重定向到 word 指代的文件（以只读方式打开），如果n省略就是0（标准输入、键盘）</p>
</li>
</ul>
<img src="https://gitee.com/lingying177/blogimage/raw/master/img/rev-shell/1.png" style="zoom:80%;" />

<img src="https://gitee.com/lingying177/blogimage/raw/master/img/rev-shell/1.png" style="zoom: 80%;" />

<ul>
<li>解释：解析器解析到 “&lt;” 以后会先处理重定向，将标准输入重定向到file，之后cat再从标准输入读取指令的时候，由于标准输入已经重定向到了file ，于是cat就从file中读取指令了。第二张图片，先定义了重定向，然后读cat文件</li>
</ul>
<img src="https://gitee.com/lingying177/blogimage/raw/master/img/rev-shell/3.png" style="zoom:50%;" />







<h6 id="4-输出重定向"><a href="#4-输出重定向" class="headerlink" title="4.输出重定向"></a>4.输出重定向</h6><ul>
<li>格式： <code>[n]&gt; file</code></li>
<li>说明： 将文件描述符 n 重定向到word 指代的文件（以写的方式打开），如果n 省略则默认就是 1（标准输出） </li>
</ul>
<img src="https://gitee.com/lingying177/blogimage/raw/master/img/rev-shell/4.png" style="zoom:80%;" />

<img src="https://gitee.com/lingying177/blogimage/raw/master/img/rev-shell/5.png" style="zoom:80%;" />

<ul>
<li>第二张图同样是 先进行重定向，然后使用echo命令</li>
</ul>
<img src="https://gitee.com/lingying177/blogimage/raw/master/img/rev-shell/6.png" style="zoom: 50%;" />

<h6 id="5-标准输出与标准错误输出重定向"><a href="#5-标准输出与标准错误输出重定向" class="headerlink" title="5.标准输出与标准错误输出重定向"></a>5.标准输出与标准错误输出重定向</h6><ul>
<li>格式： <code>&amp;&gt; word</code> 、<code>&gt;&amp; word</code> </li>
<li>说明：将<strong>标准输出</strong>与<strong>标准错误输出</strong>都定向到word代表的文件（以写的方式打开），两种格式意义完全相同，这种格式完全等价于 <code>&gt; word 2&gt;&amp;1</code> (2&gt;&amp;1 是将标准错误输出复制到标准输出，<strong>&amp;是为了区分文件1和文件描述符1</strong>的) </li>
</ul>
<img src="https://gitee.com/lingying177/blogimage/raw/master/img/rev-shell/7.png" style="zoom:80%;" />

<ul>
<li>解释：我们首先执行了一个错误的命令，可以看到错误提示被写入文件（正常情况下是会直接输出的），我们又执行了一条正确的指令，发现结果也输入到了文件，说明正确错误消息都能输出到文件。（<strong><code>&amp;&gt;</code>是混合错误输出重定向</strong>）</li>
</ul>
<img src="https://gitee.com/lingying177/blogimage/raw/master/img/rev-shell/8.png" style="zoom:50%;" />



<h6 id="6-文件描述符的复制"><a href="#6-文件描述符的复制" class="headerlink" title="6.文件描述符的复制"></a>6.文件描述符的复制</h6><ul>
<li><p>格式： <code>[n]&lt;&amp;[m]</code>、<code>[n]&gt;&amp;[m]</code> <strong>(这里的所有字符之间不能有空格)</strong> </p>
</li>
<li><p>说明：</p>
<ul>
<li>这里两个<strong>都是将文件描述符 n 复制到 m</strong> ，两者的区别是，前者是以只读的形式打开，后者是以写的形式打开 </li>
<li>这里的&amp; 目的是为了区分数字名字的文件和文件描述符，如果没有&amp; 系统会认为是将文件描述符重定向到了一个数字作为文件名的文件，而不是一个文件描述符 </li>
</ul>
</li>
<li><p>一定要注意：重定向符号不能随意换位置</p>
<ul>
<li>cmd &gt; file 2&gt;&amp;1</li>
<li>cmd 2&gt;&amp;1  &gt;file </li>
<li>第二句的意思是，先将标准错误输出重定向到1（显示器），然后将标准输出重定向到file，与第一句不同</li>
<li><img src="https://gitee.com/lingying177/blogimage/raw/master/img/rev-shell/9.png" style="zoom:50%;" />

</li>
</ul>
</li>
</ul>
<h6 id="7-exec-绑定重定向"><a href="#7-exec-绑定重定向" class="headerlink" title="7. exec 绑定重定向"></a>7. exec 绑定重定向</h6><ul>
<li><p>格式：<code>exec [n]&lt; file/[n]</code>、<code>exec &gt; file/[n]</code> </p>
</li>
<li><p>注意：</p>
<ul>
<li>格式： <code>exec [n]&lt;&gt;file</code> </li>
<li>说明：以读写方式打开file指代的文件，并将n重定向到该文件。如果n不指定的话，默认为标准输入。 </li>
<li>exec仅仅对随后的一条重定向指令有效，第二条向后就失效了</li>
</ul>
</li>
</ul>
<img src="https://gitee.com/lingying177/blogimage/raw/master/img/rev-shell/10.png" style="zoom:80%;" />

<img src="https://gitee.com/lingying177/blogimage/raw/master/img/rev-shell/11.png" style="zoom:80%;" />

<h6 id="8-HERE文件"><a href="#8-HERE文件" class="headerlink" title="8.HERE文件"></a>8.HERE文件</h6><ul>
<li><p>格式：<code>&lt;&lt;[-]EOF</code>，</p>
</li>
<li><p>说明：指定shell从当前输入源中读入行直至遇到<strong>仅包含EOF</strong>的一行（EOF后面也不能有空白符），然后所有读入的内容（不包括最后一行）作为标准输入传递给指令。<strong>‘-‘</strong>的作用是将每一行前面的tab去除后再读入。需要注意的是这个<strong>EOF</strong>不会进行任何扩展，但是如果EOF中没有字符没引号扩起来，那么here-document中的内容可以进行参数扩展、指令替换以及算术扩展（parameterexpansion, command substitution, and arithmeticexpansion）；只要有任一字符被引号扩起来，delimiter仍是将去除引号的EOF，但是输入行不会进行任何扩展。</p>
</li>
<li><p>示例：</p>
</li>
<li><pre class=" language-shell"><code class="language-shell">$ cat <<EOF
> $(pwd)     # 指令替换
> `pwd`      # 指令替换的第2种形式
> $HOME      # 参数扩展
> $((4+5))   # 算数扩展
> EOF
/home/leo        //此处开始扩展
/home/leo
/home/leo
9
$ cat <<"EOF"
> $(ls)
> `pwd`
> $HOME
> $((4+5))
> EOF
$(ls)              //因为EOF有双引号，所以不会被扩展
`pwd`
$HOME
$((4+5))</code></pre>
</li>
</ul>
<h6 id="9-HERE字符串"><a href="#9-HERE字符串" class="headerlink" title="9.HERE字符串"></a>9.HERE字符串</h6><ul>
<li><p>格式：<code>&lt;&lt;&lt;word</code></p>
</li>
<li><p>说明：将扩展后的<strong>word</strong>作为标准输入传递给指令。</p>
<ul>
<li><p>举例：使用这个功能可以将指令</p>
<p>echo ‘something’ |command</p>
<p>通过下面这种方式来实现</p>
<p>command &lt;&lt;&lt;’something’</p>
</li>
</ul>
</li>
</ul>
<h5 id="4-1-3-命令别名：（使用alias定义的别名只在当前shell中生效）"><a href="#4-1-3-命令别名：（使用alias定义的别名只在当前shell中生效）" class="headerlink" title="4.1.3 命令别名：（使用alias定义的别名只在当前shell中生效）"></a>4.1.3 命令别名：（使用alias定义的别名只在当前shell中生效）</h5><ul>
<li><code>alias</code>： alias  ll=‘ls -l’（等号后不能有空格，等号后用英文单引号、双引号引起来）</li>
<li><code>unalias</code>：unalias  命令别名</li>
</ul>
<h5 id="4-1-4-命令行编辑"><a href="#4-1-4-命令行编辑" class="headerlink" title="4.1.4 命令行编辑"></a>4.1.4 命令行编辑</h5><ul>
<li><code>Ctrl+a</code>：光标快速跳转到命令行行首</li>
<li><code>Ctrl+e</code>：光标快速跳转到命令行行尾</li>
<li><code>Ctrl+u</code>：快速删除光标位置到命令行行首的字符</li>
<li><code>Ctrl+k</code>：快速删除光标位置到命令行行尾的字符</li>
<li><code>Ctrl+l</code> ：清屏（clear）</li>
</ul>
<h5 id="4-1-5-命令行展开"><a href="#4-1-5-命令行展开" class="headerlink" title="4.1.5 命令行展开"></a>4.1.5 命令行展开</h5><ul>
<li><p>命令补齐：在path变量中搜索命令并补齐（不能补齐选项）</p>
</li>
<li><p>路径和文件补齐：在系统路径中查找</p>
</li>
<li><p>命令替换：（常用在编程中）</p>
<ul>
<li><p>将命令中的子命令替换成子命令执行结果的过程：$(command)、`commamd `(两边是反撇号)</p>
</li>
<li><p><code>&quot; &quot;</code>（双引号）：弱引用（可是实现变量的替换，把变量名替换为变量值）</p>
</li>
<li><p>``（反撇号）：命令引用</p>
</li>
<li><p><code>‘’</code>（单引号） ：强引用，不会替换</p>
</li>
</ul>
</li>
</ul>
<p>#####　4.1.6 命令行通配</p>
<ul>
<li>* ：匹配任意长度的任意字符</li>
<li>?：匹配任意单个字符</li>
<li>[]：匹配指定范围内的任意字符：[ab][a-z][A-Z][0-9][a-zA-Z][a-zA-Z0-9 ]</li>
<li><code>[^]：匹配指定范围外的任意字符</code></li>
<li>[:space:]：代表空格</li>
<li>[:punct:]：表示所有标点字符</li>
<li>[:lower:]：表示所有小写字母</li>
<li>[:upper:]：表示所有大写字母</li>
<li>[:alpha:]：表示所有字母（包括大小写）</li>
<li>[:digit:]：表示所有数字</li>
<li>[:alnum:]：表示所有数字和大小写字母</li>
</ul>
<h5 id="4-1-7-变量"><a href="#4-1-7-变量" class="headerlink" title="4.1.7 变量"></a>4.1.7 变量</h5><h5 id="4-1-8-编程"><a href="#4-1-8-编程" class="headerlink" title="4.1.8 编程"></a>4.1.8 编程</h5><h3 id="5-Linux账号与用户组"><a href="#5-Linux账号与用户组" class="headerlink" title="5. Linux账号与用户组"></a>5. Linux账号与用户组</h3><h4 id="5-1-用户管理重要文件的解释"><a href="#5-1-用户管理重要文件的解释" class="headerlink" title="5.1 用户管理重要文件的解释"></a>5.1 用户管理重要文件的解释</h4><h5 id="5-1-1-用户标识符"><a href="#5-1-1-用户标识符" class="headerlink" title="5.1.1 用户标识符"></a>5.1.1 用户标识符</h5><ul>
<li><p>用户：UID</p>
</li>
<li><p>组：GID(逻辑容器：包含用户，实现集中授权)</p>
</li>
<li><p>用户分类</p>
<ul>
<li>管理员用户：<strong>root  UID：0</strong></li>
<li>普通用户： 1000-65535</li>
<li>程序（系统）用户：<strong>1-999</strong></li>
</ul>
</li>
<li><p>组分类</p>
<p>1.第一种分类方式（按照用户分类）：</p>
<ul>
<li><p>管理员组：root</p>
</li>
<li><p>基本组：Linux创建新用户时，如果没有指定隶属的组，则系统为用户建立一个同名的用户组</p>
</li>
<li><p>附加组：一个用户可以有多个附加组（有效组）</p>
</li>
</ul>
<p>2.第二种分类：</p>
<ul>
<li>管理员组：root</li>
<li>普通用户组：</li>
<li>系统用户组：</li>
</ul>
</li>
</ul>
<h5 id="5-1-2-UID-GID解析"><a href="#5-1-2-UID-GID解析" class="headerlink" title="5.1.2 UID/GID解析"></a>5.1.2 UID/GID解析</h5><ul>
<li><p>识别思路：字符–&gt;解析–&gt;UID/GID</p>
</li>
<li><p><code>/etc/passwd</code>：存储用户基本信息</p>
</li>
<li><p><code>/etc/shadow</code>：存储用户的影子口令</p>
</li>
<li><p><code>/etc/group</code>：存储组的用户信息</p>
</li>
</ul>
<h5 id="5-1-3-etc-passwd-解释"><a href="#5-1-3-etc-passwd-解释" class="headerlink" title="5.1.3 /etc/passwd 解释"></a>5.1.3 /etc/passwd 解释</h5><ul>
<li>第一列：用户名（name）</li>
<li>第二列：加密密码（x表示密码占位符，密码保存在/etc/shadow中）</li>
<li>第三列：UID</li>
<li>第四列：GID</li>
<li>第五列：描述信息</li>
<li>第六列：用户的宿主目录</li>
<li>第七列：用户默认使用的shell（/etc/shell）</li>
</ul>
<h5 id="5-1-4-etc-shadow-解释"><a href="#5-1-4-etc-shadow-解释" class="headerlink" title="5.1.4 /etc/shadow 解释"></a>5.1.4 /etc/shadow 解释</h5><ul>
<li>第一列：用户的登录名</li>
<li>第二列：用户加密后的密码</li>
<li>第三列：最后一次更改密码的时间（时间戳）</li>
<li>第四列：密码不可以修改的天数</li>
<li>第五列：密码需要重新修改的天数</li>
<li>第六列：密码需要修改前的警告天数</li>
<li>第七列：密码过期后账号宽限时间</li>
<li>第八列：账号失效日期</li>
<li>第九列：保留 （暂时没用）</li>
</ul>
<h5 id="5-1-5-etc-shadow-密码区域解释"><a href="#5-1-5-etc-shadow-密码区域解释" class="headerlink" title="5.1.5 /etc/shadow 密码区域解释"></a>5.1.5 /etc/shadow 密码区域解释</h5><p>三部分组成：用<strong>$</strong>隔开（格式：<strong>$</strong>id<strong>$</strong>salt<strong>$</strong>encrypted）</p>
<ul>
<li>第一部分：加密算法<ul>
<li>1：md5加密</li>
<li>5：SHA-256加密</li>
<li>6：SHA–512加密</li>
</ul>
</li>
<li>第二部分：随机序列号（salt）</li>
<li>第三部分：随机序列号和设置密码共同加密后的字符串</li>
</ul>
<h5 id="5-1-6-etc-group-解释"><a href="#5-1-6-etc-group-解释" class="headerlink" title="5.1.6 /etc/group  解释"></a>5.1.6 /etc/group  解释</h5><ul>
<li>第一列：组名字</li>
<li>第二列：组的密码区域</li>
<li>第三列：组的id号（GID）</li>
<li>第四列：组的成员（不显示初始化成员）</li>
</ul>
<h5 id="5-1-7-etc-gshadow-解释"><a href="#5-1-7-etc-gshadow-解释" class="headerlink" title="5.1.7 /etc/gshadow 解释"></a>5.1.7 /etc/gshadow 解释</h5><ul>
<li>第一列：组的名字</li>
<li>第二列：组的密码</li>
<li>第三列：组的管理员</li>
<li>第四列：组的成员列表</li>
</ul>
<h4 id="5-2-重要的文件"><a href="#5-2-重要的文件" class="headerlink" title="5.2 重要的文件"></a>5.2 重要的文件</h4><h5 id="5-2-1-etc-useradd目录（只对新用户有效）："><a href="#5-2-1-etc-useradd目录（只对新用户有效）：" class="headerlink" title="5.2.1  /etc/useradd目录（只对新用户有效）："></a>5.2.1  /etc/useradd目录（只对新用户有效）：</h5><pre><code># useradd defaults file  //注释行
GROUP=100        //可以创建普通组
HOME=/home       //普通用户宿主目录（在home下生成和用户同名的目录）
INACTIVE=-1      //是否启用用户过期停止使用权（若为数字，则代表过期宽限时间，-1代表不启用）
EXPIRE=          //设定过期时间
SHELL=/bin/bash  //设定用户默认使用的shell
SKEL=/etc/skel   //新用户宿主目录模板目录
CREATE_MAIL_SPOOL=yes   //是否为用户启用邮件通知</code></pre><h5 id="5-1-2-etc-skel-目录（用户宿主目录模板目录，只对新建用户生效）："><a href="#5-1-2-etc-skel-目录（用户宿主目录模板目录，只对新建用户生效）：" class="headerlink" title="5.1.2  /etc/skel 目录（用户宿主目录模板目录，只对新建用户生效）："></a>5.1.2  /etc/skel 目录（用户宿主目录模板目录，只对新建用户生效）：</h5><ul>
<li><p>新用户的目录下必须有这三个文件</p>
</li>
<li><p><code>.bash_logout</code>：用户注销时执行的命令</p>
</li>
<li><p><code>.bash_profile</code>：用户登录系统时执行的命令（用户变量）</p>
</li>
<li><p><code>.bashrc</code>：用户登录一个新shell时执行的命令</p>
</li>
</ul>
<h5 id="5-1-3-etc-login-defs-文件解释：（只对新建用户生效）"><a href="#5-1-3-etc-login-defs-文件解释：（只对新建用户生效）" class="headerlink" title="5.1.3  /etc/login.defs 文件解释：（只对新建用户生效）"></a>5.1.3  /etc/login.defs 文件解释：（只对新建用户生效）</h5><pre><code>- MAIL_DIR                                     /var/spool/mail
- PASS_MAX_DAYS            99999            //密码最长使用时间
- PASS_MIN_DAYS            0                //密码最短使用时间，0代表不受限制
- PASS_MIN_LEN             5                //密码最小长度
- PASS_WARN_AGE            7                //密码过期警告时间
- UID_MIN                  1000             //普通用户最小UID号
- UID_MAX                  60000            //普通用户最大UID号
- SYS_UID_MIN              201              //系统用户最小的UID
- SYS_UID_MAX              999              //系统用户最大的UID 
- GID_MIN                  1000             //普通组最小GID
- GID_MAX                  60000            //普通组最大UID号
- SYS_GID_MIN              201              //系统组最小的UID
- SYS_GID_MAX              999              //系统组最大的UID 
- CREATE_HOME              YES              //是否创建宿主目录
- UMASK                    077              //关于权限的反掩码
- USERGROUPS_ENAB          YES              //删除用户时是否删除组
- ENCRYPY_METHOD           SHA512           //用户密码的加密方式</code></pre><h4 id="5-3-用户管理命令"><a href="#5-3-用户管理命令" class="headerlink" title="5.3 用户管理命令"></a>5.3 用户管理命令</h4><h5 id="5-3-1-useradd：添加新用户（更改-etc-passwd、-etc-group、-etc-shadow）"><a href="#5-3-1-useradd：添加新用户（更改-etc-passwd、-etc-group、-etc-shadow）" class="headerlink" title="5.3.1  useradd：添加新用户（更改/etc/passwd、/etc/group、/etc/shadow）"></a>5.3.1  <code>useradd</code>：添加新用户（更改/etc/passwd、/etc/group、/etc/shadow）</h5><ul>
<li>语法：<code>useradd [options] user_name</code></li>
<li>-c：新建用户时，为用户添加描述信息</li>
<li>-d：指定用户的宿主目录</li>
<li>-D：查看和修改默认配置（修改/etc/default/useradd文件中的默认值）<ul>
<li>-g：修改默认的组</li>
<li>-b：修改默认宿主目录</li>
<li>-f：修改过期是否停用</li>
<li>-e：修改过期时间</li>
<li>-s：修改默认shell</li>
</ul>
</li>
<li>-e：新建用户时，设置过期时间（格式：YYYY-MM-DD）</li>
<li>-g：指定用户的基本组（没有该选项时，Linux会建立一个同名组作为用户的基本组）</li>
<li>-G：新建用户时，指定用户的附加组，附加组可以有多个</li>
<li>-m：创建宿主目录（必须与  -k  一起使用）</li>
<li>-M：创建用户时，不为用户创建宿主目录</li>
<li>-p：创建用户时，为用户设置加密的密码（不推荐使用）</li>
<li>-r：创建系统用户</li>
<li>-s：指定默认的shell（系统支持的shell）</li>
<li>-u：指定用户的UID </li>
<li>手动添加用户需要<ul>
<li>1.将数据写入/etc/passwd、/etc/shadow、/etc/group</li>
<li>2.在/home/下建立相应文件夹</li>
<li>3.将/etc/skel/下的文件复制到/home/用户 /  文件夹下</li>
</ul>
</li>
</ul>
<h5 id="5-3-2-passwd-：为用户设置密码、锁定解锁用户、查看用户状态"><a href="#5-3-2-passwd-：为用户设置密码、锁定解锁用户、查看用户状态" class="headerlink" title="5.3.2  passwd ：为用户设置密码、锁定解锁用户、查看用户状态"></a>5.3.2  <code>passwd</code> ：为用户设置密码、锁定解锁用户、查看用户状态</h5><ul>
<li><p>语法：<code>passwd [options] user_name</code> </p>
</li>
<li><p>passwd   user_name  ：直接设置密码</p>
</li>
<li><p>-l：锁定用户（暂时无法登陆）</p>
</li>
<li><p>-u：解锁用户</p>
</li>
<li><p>-S：查看用户状态，显示/etc/shadow文件中各个字段的内容</p>
</li>
<li><p>–stdin：标准输入，经常在shell脚本编程中为用户自动设置密码</p>
</li>
<li><p>-d：删除用户密码，允许普通用户以空密码登陆，仅root用户可以使用</p>
</li>
<li><p>-e：快速设置密码过期（用户再次登录时需要修改密码）</p>
</li>
<li><p>-n：设置密码最小使用期限</p>
</li>
<li><p>-x：设置密码最大使用期限</p>
</li>
<li><p>-w：设置密码过期前的警告时间</p>
</li>
<li><p>-i：修改密码过期后的宽限时间</p>
</li>
<li><p>普通用户设置密码时，先验证当前密码，并且要求符合密码规范</p>
</li>
<li><p>root用户设置密码时，不需要验证密码，并且可以不符合密码规范</p>
</li>
</ul>
<h5 id="5-3-3-userdel：删除用户（passwd、shadow、group都修改删除）"><a href="#5-3-3-userdel：删除用户（passwd、shadow、group都修改删除）" class="headerlink" title="5.3.3  userdel：删除用户（passwd、shadow、group都修改删除）"></a>5.3.3  <code>userdel</code>：删除用户（passwd、shadow、group都修改删除）</h5><ul>
<li><p>语法：<code>userdel [options] user_name</code>  </p>
</li>
<li><p>-r ：删除用户时，连同用户的宿主目录一块删除（如果不加，则不删除）</p>
</li>
</ul>
<h5 id="5-3-4-usermod-：修改用户属性（root可以通过vim进行修改）"><a href="#5-3-4-usermod-：修改用户属性（root可以通过vim进行修改）" class="headerlink" title="5.3.4  usermod  ：修改用户属性（root可以通过vim进行修改）"></a>5.3.4  <code>usermod</code>  ：修改用户属性（root可以通过vim进行修改）</h5><ul>
<li>语法：<code>usermod [options] user_name</code></li>
<li>-c：更改用户的描述信息</li>
<li>-d：更改用户的宿主目录</li>
<li>-e：更改用户的过期时间</li>
<li>-f：修改/etc/shadow中第七列的内容</li>
<li>-g：修改用户的基本组</li>
<li>-G：修改用户的附加组</li>
<li>-l： 更改用户的登录名（重命名、不修改宿主目录）</li>
<li>-s：修改用户的shell</li>
<li>-L：锁定用户</li>
<li>-U：解锁用户</li>
</ul>
<h5 id="5-3-5-chsh-：修改用户的shell"><a href="#5-3-5-chsh-：修改用户的shell" class="headerlink" title="5.3.5  chsh ：修改用户的shell"></a>5.3.5  <code>chsh</code> ：修改用户的shell</h5><ul>
<li>语法：<code>chsh [options] user_name</code>  </li>
<li>-s：后面跟shell，更改用户的shell</li>
<li>-l：显示系统当前支持的shell</li>
<li>在/etc/目录下添加  nologin.txt 文件，则可以进行提示</li>
</ul>
<h5 id="5-3-6-finger-：显示用户的基本信息-需要安装"><a href="#5-3-6-finger-：显示用户的基本信息-需要安装" class="headerlink" title="5.3.6  finger ：显示用户的基本信息(需要安装)"></a>5.3.6  <code>finger</code> ：显示用户的基本信息(需要安装)</h5><ul>
<li>语法：<code>finger [options] user_name</code>  </li>
<li>-s、-l、</li>
</ul>
<h5 id="5-3-7-chfn-：修改用户的基本信息"><a href="#5-3-7-chfn-：修改用户的基本信息" class="headerlink" title="5.3.7  chfn ：修改用户的基本信息"></a>5.3.7  <code>chfn</code> ：修改用户的基本信息</h5><ul>
<li>语法：<code>chfn [options] user_name</code></li>
<li>-o：修改办公室</li>
<li>-p：修改办公室电话</li>
<li>-h：修改家庭电话</li>
</ul>
<h5 id="5-3-8-id：显示用户和组的ID号"><a href="#5-3-8-id：显示用户和组的ID号" class="headerlink" title="5.3.8  id：显示用户和组的ID号"></a>5.3.8  <code>id</code>：显示用户和组的ID号</h5><ul>
<li>语法：<code>id [options] user_name</code></li>
<li>-a：忽略其他版本的区别</li>
<li>-Z：显示安全上下文的内容（内核）</li>
<li>-g： 显示有效组号</li>
<li>-G：显示所有组号（基本组、附加组）</li>
<li>-n：显示名字（与ugG连用）</li>
<li>-u ：显示id</li>
</ul>
<h5 id="5-3-9-chage：修改用户密码的时间信息"><a href="#5-3-9-chage：修改用户密码的时间信息" class="headerlink" title="5.3.9  chage：修改用户密码的时间信息"></a>5.3.9  <code>chage</code>：修改用户密码的时间信息</h5><ul>
<li>语法： <code>chage [options] user_name</code></li>
<li>-l ：列出用户的详细的密码参数</li>
<li>-d：修改/etc/shadow第三列的内容（后面日期格式：YYYY-MM-DD）</li>
<li>-E：修改/etc/shadow中第八列的信息，后面跟日期</li>
<li>-I：修改/etc/shadow中第七列的内容，后面跟天数</li>
<li>-m：修改/etc/shadow中第四列的内容，后面跟天数</li>
<li>-M：修改/etc/shadow中第五列的内容，后面跟天数</li>
<li>-w：修改/etc/shadow中第六列的内容，后面跟天数</li>
</ul>
<h4 id="5-4-组管理命令"><a href="#5-4-组管理命令" class="headerlink" title="5.4  组管理命令"></a>5.4  组管理命令</h4><h5 id="5-4-1-groupadd：创建组"><a href="#5-4-1-groupadd：创建组" class="headerlink" title="5.4.1  groupadd：创建组"></a>5.4.1  <code>groupadd</code>：创建组</h5><ul>
<li>-g：指定组的id</li>
<li>-r：创建系统组</li>
</ul>
<h5 id="5-4-2-groupdel：删除组"><a href="#5-4-2-groupdel：删除组" class="headerlink" title="5.4.2  groupdel：删除组"></a>5.4.2  <code>groupdel</code>：删除组</h5><ul>
<li>默认情况下不能删除用户的基本组，可以通过修改用户的基本组后删除组，可以删除用户的同时系统删除基本组（该组是一个用户的基本组）</li>
</ul>
<h5 id="5-4-3-groupmod-：修改组的属性"><a href="#5-4-3-groupmod-：修改组的属性" class="headerlink" title="5.4.3  groupmod ：修改组的属性"></a>5.4.3  <code>groupmod</code> ：修改组的属性</h5><ul>
<li>-g：修改组的id号</li>
<li>-n：重命名</li>
</ul>
<h5 id="5-4-4-gpasswd：为组设置密码、管理员、添加成员"><a href="#5-4-4-gpasswd：为组设置密码、管理员、添加成员" class="headerlink" title="5.4.4 gpasswd：为组设置密码、管理员、添加成员"></a>5.4.4 <code>gpasswd</code>：为组设置密码、管理员、添加成员</h5><ul>
<li>-A：设置组管理员</li>
<li>-M：批量添加成员</li>
<li>-r：移除组的密码</li>
<li>-R：让组的密码失效</li>
<li>-a：为组添加成员（组管理员的命令）</li>
<li>-d：删除组成员（组管理员的命令）</li>
</ul>
<h5 id="5-4-5-newgrp：为用户修改有效组（只在当前shell生效）"><a href="#5-4-5-newgrp：为用户修改有效组（只在当前shell生效）" class="headerlink" title="5.4.5  newgrp：为用户修改有效组（只在当前shell生效）"></a>5.4.5  <code>newgrp</code>：为用户修改有效组（只在当前shell生效）</h5><ul>
<li>exit：退出newgroup</li>
</ul>
<h5 id="5-4-5-groupmems：为组添加成员，显示组成员列表"><a href="#5-4-5-groupmems：为组添加成员，显示组成员列表" class="headerlink" title="5.4.5  groupmems：为组添加成员，显示组成员列表"></a>5.4.5  <code>groupmems</code>：为组添加成员，显示组成员列表</h5><h3 id="6-认证"><a href="#6-认证" class="headerlink" title="6. 认证"></a>6. 认证</h3><h4 id="6-1-nsswitch：名称解析"><a href="#6-1-nsswitch：名称解析" class="headerlink" title="6.1 nsswitch：名称解析"></a>6.1 <code>nsswitch</code>：名称解析</h4><ul>
<li><p>认证的中间桥梁，通过libnss库</p>
</li>
<li><p>位置：/etc/nsswitch.conf</p>
</li>
<li><p>查看so文件的命令：readelf 命令 </p>
</li>
<li><p><code>getent hosts www.baidu.com</code>  ：查找百度的解析地址</p>
</li>
<li><p><code>getent 文件 内容</code></p>
</li>
</ul>
<h4 id="6-2-PAM-验证"><a href="#6-2-PAM-验证" class="headerlink" title="6.2 PAM 验证"></a>6.2 PAM 验证</h4><h5 id="6-2-1-相关文件"><a href="#6-2-1-相关文件" class="headerlink" title="6.2.1 相关文件"></a>6.2.1 相关文件</h5><ul>
<li>嵌入式认证模块，PAM 本身不会执行验证，必须执行策略和模块进行验证</li>
<li><code>ldd</code> 命令 ：查看与服务相关的模块<ul>
<li><code>ldd  service_path</code> </li>
</ul>
</li>
<li>/etc/pam.d/service_name （系统中支持pam认证的服务名称）</li>
<li>/etc/pam.d/other （当系统中支持pam认证的服务没有匹配到任何条目时，匹配other中的配置）</li>
</ul>
<h5 id="6-2-2-etc-pam-d-service-name格式"><a href="#6-2-2-etc-pam-d-service-name格式" class="headerlink" title="6.2.2  /etc/pam.d/service_name格式"></a>6.2.2  /etc/pam.d/service_name格式</h5><ul>
<li><p>格式：type   control  modules   [modules_args] </p>
</li>
<li><p>type ：</p>
<ul>
<li>auth（authentication）：身份验证，匹配用户名密码</li>
<li>account  ：检查用户名和密码的有效性！有效性</li>
<li>password ：检查修改密码时，密码是否符合标准</li>
<li>session ：检查用户会话相关属性</li>
</ul>
</li>
<li><p>control：</p>
<ul>
<li>required：一票否决权，继续匹配下面的条目，最后不匹配（保护系统安全性）</li>
<li>requisite：一票否决权，不继续匹配下面的条目，直接给用户返回结果</li>
<li>sufficient：一票同意权，不匹配下面的条目，直接给用户返回结果（慎用）</li>
<li>optional：不影响最终的结果</li>
<li>include：引用其他的配置文件，把匹配权交给其他配置文件，（如果其他匹配跳出，则整个匹配结束）</li>
<li>substack：引用其他配置，把匹配权交给其他配置文件（如果其他配置跳出，则仅仅跳出子匹配）</li>
</ul>
</li>
<li><p>modules：匹配认证模块 （value = action）</p>
<ul>
<li>value：<ul>
<li>success、open_err、symbol_err、service_err、 system_err、buf_err、perm_denied、auth_err、cred_insufficient、authinfo_unavail、user_unknown、maxtries、new_authtok_reqd、acct_expired、 session_err、cred_unavail、cred_expired、cred_err、no_module_data、conv_err、 authtok_err、authtok_recover_err、authtok_lock_busy、authtok_disable_aging、 try_again、ignore、abort、authtok_expired、module_unknown、bad_item和default.最后一个(default)能够用来设置上面的返回值无法表达的行为.</li>
</ul>
</li>
<li>action值：<ul>
<li>ignore:忽略执行结果</li>
<li>bad:如果失败,结果被用于整个执行栈,后续栈继续执行</li>
<li>die:和bad相似,但是失败直接返回结果,后续栈不执行</li>
<li>ok:如果PAM_SUCCESS覆盖之前值</li>
<li>done:和ok 相似,但是栈直接返回结果 </li>
<li>reset:重置栈当前状态</li>
</ul>
</li>
<li>部分语法：<ul>
<li>required  [success=ok new_authtok_reqd=ok ignore=ignore default=bad]</li>
<li>requisite [success=ok new_authtok_reqd=ok ignore=ignore default=die] </li>
<li>sufficient [success=done new_authtok_reqd=done default=ignore] </li>
<li>optional   [success=ok new_authtok_reqd=ok default=ignore] </li>
</ul>
</li>
<li>modules：PAM认证模块相关文件:<ul>
<li>/etc/pam.d/*:每一个应用程序PAM配置文件</li>
<li>/usr/lib64/security/*:PAM认证模块文件的实际存放位置</li>
<li>/etc/security/*:其他PAM环境的配置文件,比如 access.conf</li>
<li>/usr/share/doc/pam-x:存放详细的PAM的说明文件</li>
</ul>
</li>
</ul>
</li>
<li><p>查看应用程序是否支持PAM认证:</p>
<ul>
<li>ldd app_path </li>
<li>如: ldd /usr/sbin/vsftpd  |  grep libpam</li>
<li>如：ldd `which  httpd`  |  grep  libpam</li>
</ul>
</li>
<li><p>linux-pam 官方文档下载地址： <a href="http://www.linux-pam.org/" target="_blank" rel="noopener">http://www.linux-pam.org/</a> </p>
</li>
<li><p>部分pam-*.so文件解释：</p>
<ul>
<li>pam_env.so:设置环境变量的模块,如果需要额外的环境变量,可以使用</li>
<li>pam_env.so进行设置,配置文件/etc/security/pam_env.conf </li>
<li>pam_unix.so:提供验证阶段的验证功能,也可以提供授权管理</li>
<li>pam_secruetty.so:限制系统管理员只能够从安全的终端登录,安全终端:/etc/securetty</li>
<li>pam_nologin.so:限制普通使用者能否登录主机进行使用,当/etc/nologin文件存在时,所有的普通用户都无法登录</li>
<li>pam_cracklib.so:可是限制恶意攻击,检查密码强度</li>
<li>pam_pwquality.so:完全兼容pam_cracklib.so,检查密码强度,包括设置的密码是否在字典</li>
<li>pam_limits.so:限制使用者打开文件数量,单个文件大小</li>
<li>pam_rootok.so:如果UID为0,直接通过,如root用户su到普通用户使用此模</li>
<li>pam_listfile.so:验证使用其他的文件</li>
<li>pam_access.so:控制访问的模块,默认配置/etc/security/access.conf: ALL EXCEPT gooann:ALL</li>
</ul>
</li>
</ul>
<h3 id="7-软件包管理：RPM-Redhat-Package-Manager"><a href="#7-软件包管理：RPM-Redhat-Package-Manager" class="headerlink" title="7. 软件包管理：RPM(Redhat Package Manager)"></a>7. 软件包管理：RPM(Redhat Package Manager)</h3><h4 id="7-1-应用程序"><a href="#7-1-应用程序" class="headerlink" title="7.1 应用程序"></a>7.1 应用程序</h4><p><strong>源代码 —— 编译 ——  链接 —— 运行</strong></p>
<ul>
<li><p>应用程序：具有执行权限的就是。与CPU架构密不可分</p>
</li>
<li><p>编译：生成二进制文件（可执行文件），匹配底层架构</p>
</li>
<li><p>链接：</p>
<ul>
<li>库：静态库和动态库   .so  （shared object）<ul>
<li>静态链接过程：把库文件集成到应用程序中</li>
<li>动态链接过程：库文件与应用程序分开，做链接，运行时调用</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>程序 = 数据 + 指令        应用程序运行时，申请CPU和内存资源</p>
<p>应用程序中包含的内容:</p>
<ul>
<li>二进制文件(可执行程序)（/bin、/ sbin、/usr/bin、/usr/ sbin）</li>
<li>库（/usr/lib）</li>
<li>配置文件（/etc）</li>
<li>帮助文件（/usr/share/）</li>
</ul>
<h4 id="7-2-内存地址空间"><a href="#7-2-内存地址空间" class="headerlink" title="7.2 内存地址空间"></a>7.2 内存地址空间</h4><ul>
<li>text：存放指令</li>
<li>data+bss：data存放数据，bss： block  system of symbol 存放初始化为0的变量</li>
<li>堆：heap存放运行中临时文件</li>
<li>栈：存放应用程序的变量和函数等</li>
</ul>
<h4 id="7-3-软件安装——RPM"><a href="#7-3-软件安装——RPM" class="headerlink" title="7.3 软件安装——RPM"></a>7.3 软件安装——RPM</h4><p>Redhat ，SUSE：RPM</p>
<p>Debian ，Ubuntu：dpt</p>
<p>前端工具：yum   apt-get    （自行解决依赖关系）</p>
<p>后端工具：RPM  dpt    （不能自行解决依赖关系）</p>
<h5 id="7-3-1-RPM的优点"><a href="#7-3-1-RPM的优点" class="headerlink" title="7.3.1 RPM的优点"></a>7.3.1 RPM的优点</h5><ul>
<li>RPM软件包中包含了编译过的程序与配置文件，用户不需要重新编译</li>
<li>RPM在安装之前，首先会检查硬盘容量，操作系统版本等，避免被错误安装</li>
<li>RPM使用RPM<strong>数据库</strong>管理（<strong>/var/lib/rpm</strong>），数据中记录应用程序的参数，便于升级，卸载，查询等</li>
<li>RPM本身会提供应用程序版本信息，相关属性，软件名称，用途等。便于用户了解软件</li>
</ul>
<h5 id="7-3-2-RPM包的组成"><a href="#7-3-2-RPM包的组成" class="headerlink" title="7.3.2 RPM包的组成"></a>7.3.2 RPM包的组成</h5><p>RPM命名：</p>
<ul>
<li><p>包：组成部分</p>
<ul>
<li>主包：yum-3.4.3-150.e17.centos.noarch.rpm</li>
<li>子包：yum-langpacks-0.4.2-7.e17.noarch.rpm</li>
</ul>
</li>
<li><p>包名格式：</p>
<ul>
<li>name-version-release.arch.rpm   (noarch代表任何架构都可以使用)</li>
</ul>
</li>
<li><p>其中的version：</p>
<ul>
<li>主版本号：功能重大改进则改进主版本号</li>
<li>次版本号：某个子功能发生重大变化</li>
<li>发行号：修正了部分bug，调整了一点功能</li>
</ul>
</li>
</ul>
<p>RPM的功能：安装、查询、卸载、升级、校验、数据库重建、验证数据包</p>
<p>两种类型的包：</p>
<ul>
<li><p>RPM包：经过源代码编译后的软件包</p>
</li>
<li><p>.tar.gz：源码包，没有经过编译</p>
</li>
</ul>
<p>RPM的命令： </p>
<ol>
<li><strong>安装</strong>： <code>rpm -ivh  name.rpm</code></li>
</ol>
<ul>
<li>-i   ：安装</li>
<li>-h   ：打印50个#号显示进度条</li>
<li>-v   ：显示更详细的信息</li>
<li>–nodeps：忽略依赖关系，可能导致软件包安装不完整</li>
<li>–replacepkgs ：重新安装，替换原有安装；</li>
<li>–force：强行安装，可以实现重装或降级；</li>
</ul>
<ol start="2">
<li><strong>查询</strong>：<code>RPM -q  PACKAGE_NAME</code>: 查询指定的包是否已经安装</li>
</ol>
<ul>
<li>-qa ：查询已经安装的所有包</li>
<li>-qi  PACKAGE_NAME：查询指定包的说明信息;</li>
<li>-ql  PACKAGE_NAME：询指定包安装后生成的文件列表;</li>
<li>-qc PACEAGE_NEME：查询指定包安装的配置文件;</li>
<li>-qd PACKAGE_NAME：查询指定包安装的帮助文件;</li>
<li>-qf   /path/to/somefile：查询指定的文件是由哪个rpm包安装生成的;</li>
<li>-q –scripts PACKAGE_NAME：查询指定包中包含的脚本<ul>
<li>脚本：包含软件包安装前(preinstall)，安装后(postinstall)，卸载前(preuninstall)，卸载后(postuninstall)执行的脚本</li>
</ul>
</li>
</ul>
<ol start="3">
<li><strong>未安装前查询</strong></li>
</ol>
<p>如果某rpm包尚未安装，我们需查询其说明信息、安装以后会生成的文件：</p>
<ul>
<li><p>rpm  -qpi  /path/to/package_name  查看未安装软件包信息</p>
</li>
<li><p>rpm  -qpl  /path/to/package_name  查看未安装软件包 安装的列表</p>
</li>
</ul>
<ol start="4">
<li><strong>升级</strong></li>
</ol>
<ul>
<li>-Uvh  /PATH/TO/NEW_PACKAGE_FILE：如果装有老版本的，则升级；否则，则安装;</li>
<li>-Fvh  / PATH/TO/NEW_PACKAGE_FILE：如果装有老版本的，则升级；否则，退出;</li>
<li>-Uvh  – oldpackage  PACKAGE_NAME：降级</li>
</ul>
<ol start="5">
<li><strong>卸载</strong></li>
</ol>
<ul>
<li>rpm -e  PACKAGE_NAME  [– nodeps：忽略依赖关系]</li>
</ul>
<ol start="6">
<li><strong>校验</strong>：验证软件包列表或配置文件的完整性</li>
</ol>
<ul>
<li><p>rpm -V  PACKAGE_NAME </p>
<p>  应用程序配置文件完整性破坏后的代码</p>
<pre><code> 5      MD5校验和
 S      文件大小
 L      符号连接
 T      修改时间
 D      设备
 U      用户
 G      组
 M      模式(包括许可和文件类型)</code></pre></li>
</ul>
<ol start="7">
<li><strong>重建数据库</strong></li>
</ol>
<ul>
<li>rpm  – rebuilddb  ：重建数据库，一定会重新建立</li>
<li>rpm  – initdb ：初始化数据库，没有才建立，有就不用建立</li>
</ul>
<ol start="8">
<li><strong>检查</strong>来源合法性，及软件包完整性</li>
</ol>
<ul>
<li>ls /etc/pki/rpm-gpg/<ul>
<li>RPM-GPG-KEY-redhat-release</li>
</ul>
</li>
<li>rpm -K  /path/to/package_file<ul>
<li>dsa ，gpg：验证来源合法性，也即验证签名；可以使用  – nosignature，忽略此项</li>
<li>sha1，md5：验证软件包完整性；可以使用 –nodigest  ，忽略此项</li>
</ul>
</li>
<li>rpm  –import  /etc/pki/rpm-gpg/RPM-GPG-KEY-Centos-7</li>
</ul>
<h4 id="7-4-软件安装——YUM"><a href="#7-4-软件安装——YUM" class="headerlink" title="7.4 软件安装——YUM"></a>7.4 软件安装——YUM</h4><p>YUM 解决依赖关系，RPM进行安装卸载</p>
<p>yum采用C/S架构，依靠yum 仓库（web，ftp，file）</p>
<ul>
<li>yum配置文件：/etc/yum.conf</li>
<li>yum仓库：/etc/yum.repos.d/</li>
</ul>
<h5 id="7-4-1-yum功能："><a href="#7-4-1-yum功能：" class="headerlink" title="7.4.1 yum功能："></a>7.4.1 yum功能：</h5><pre><code>install:安装软件包
update:升级软件包
check-update:检查软件包的升级信息
upgrade:更新软件包
remove :卸载软件包
list:显示所有已经安装和未安装的软件包
info:查看软件包信息
clean:清除软件包一些信息和网络源缓存
search:查看指定软件包相关的软件包
deplist:查询软件包依赖关系列表
repolist:查看可用的yum源
repoinfo:查看可用yum源的信息</code></pre><h5 id="7-4-2-yum源（-etc-yum-repos-d-）："><a href="#7-4-2-yum源（-etc-yum-repos-d-）：" class="headerlink" title="7.4.2 yum源（ /etc/yum.repos.d/ ）："></a>7.4.2 yum源（ <code>/etc/yum.repos.d/</code> ）：</h5><pre><code>//每个仓库分别是一个文件，文件名以.repo结尾
[name]         //id
name =         //引用变量
baseurl =      //yum仓库 
enabled =      //是否启用该yum仓库
gpgcheck =     //是否进行完整性和校验和检测
gpgkey =       //完整性和校验和检测文件</code></pre><p>yum仓库：</p>
<ul>
<li>$releasever：发行版本</li>
<li>$basearch：CPU架构集</li>
<li>$arch：CPU架构</li>
</ul>
<p>yum元数据目录：repodata</p>
<ul>
<li>primary.xml.gz ：所有RPM列表；依赖关系；软件包安装列表</li>
<li>filelist.xml.gz ：包含所有RPM 包的所有列表</li>
<li>other.xml.gz ：包含软件包其他信息，比如更改记录</li>
<li>repomd.xml：包含primary/filelist/other时间戳和校验和</li>
<li>comp.xml：包含软件包组的列表</li>
</ul>
<p><strong>创建元数据目录</strong></p>
<ul>
<li>先使用网络源安装createrepo<ul>
<li>yum -y install  createrepo</li>
</ul>
</li>
<li>在本地源（包含所有安装包的路径）下，创建元数据目录<ul>
<li>createrepo  /opt/repo    # 这个目录下提前放置了需要放到源中的安装包</li>
</ul>
</li>
<li>直接通过修改repo源，使用本地源即可</li>
</ul>
<h5 id="7-4-3-创建自己的yum源"><a href="#7-4-3-创建自己的yum源" class="headerlink" title="7.4.3 创建自己的yum源"></a>7.4.3 创建自己的yum源</h5><p>两台机器</p>
<ul>
<li><p><strong>yum源</strong>：192.168.10.10    </p>
</li>
<li><p>ftp方式: </p>
<ul>
<li># mount  /dev/cdrom  /media</li>
<li># yum  -y  install  vsftpd</li>
<li># systemctl  start  vsftpd</li>
<li># systemctl  enable  vsftpd</li>
<li># cp  -rf  /media/   /var/ftp   #(这个目录是Linux默认共享的ftp目录)</li>
</ul>
</li>
<li><p>httpd方式:</p>
<ul>
<li># mount   /dev/  cdrom/media</li>
<li># yum -y install  httpd</li>
<li># systemctl start  httpd</li>
<li># systemctl enable  httpd</li>
<li># cp -rf /media/   /var/www/html   #(这个目录是Linux下默认共享的http目录)</li>
</ul>
</li>
</ul>
<ul>
<li><p><strong>yum客户端</strong>(个人电脑)：192.168.10.20    </p>
</li>
<li><p>ftp:   vim   ftp.repo</p>
</li>
</ul>
<pre><code>[ftp]
name=file_repo
baseurl=ftp://192.168.10.10/media
enable=1
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-Centos-7</code></pre><ul>
<li>httpd:  vim   httpd.repo</li>
</ul>
<pre><code>[httpd]
name=httpd_repo
baseurl=http://192.168.10.10/media
enabled=1
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7</code></pre><ul>
<li>本地源： vim  file.repo</li>
</ul>
<pre><code>[httpd]
name=httpd_repo
baseurl=file:///media      #光盘挂载的目录
enabled=1
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7</code></pre><p><strong>注意</strong>：在创建本地源时，可能会因为没有元数据目录（repodata）而导致失败，所以要创建元数据目，创建方法看上面  <strong>7.2 yum源</strong> –&gt;  创建元数据目录</p>
<h5 id="7-4-4-使用epel源"><a href="#7-4-4-使用epel源" class="headerlink" title="7.4.4  使用epel源"></a>7.4.4  <strong>使用epel源</strong></h5><p> <a href="https://mirrors.tuna.tsinghua.edu.cn/help/epel/" target="_blank" rel="noopener">https://mirrors.tuna.tsinghua.edu.cn/help/epel/</a> </p>
<h4 id="7-5软件安装——编译安装"><a href="#7-5软件安装——编译安装" class="headerlink" title="7.5软件安装——编译安装"></a>7.5软件安装——编译安装</h4><h5 id="7-5-1-安装开发工具组"><a href="#7-5-1-安装开发工具组" class="headerlink" title="7.5.1  安装开发工具组"></a>7.5.1  安装开发工具组</h5><p>包括gcc、g++等</p>
<ul>
<li>yum -y groupinstall “Development Tools”</li>
</ul>
<h5 id="7-5-2-编译链接工具"><a href="#7-5-2-编译链接工具" class="headerlink" title="7.5.2 编译链接工具"></a>7.5.2 编译链接工具</h5><ol>
<li><p>automake  —-&gt;  makefile.in(半成品)  –（通过configure）–&gt; makefile</p>
</li>
<li><p>autoconf ：生成脚本文件：configure，参照makefile.in 生成makefile</p>
</li>
<li><p>make：不是编译工具，而是项目管理工具，按照makefile文件中的定义，去定义软件中功能向后顺序</p>
</li>
<li><p>makeinstall：安装</p>
</li>
</ol>
<pre><code>#执行编译安装步骤
1. 获取源代码并解压
    # tar xf  xxx.tar.gz
    # tar xf  xxx.tar.bz2
2. 执行configure脚本 （在源码目录中运行）  ./configure --...
    功能：1.检查应用程序所需要的编译环境 2.生成Makefile 3.定制功能
    选项：--help：进行查看脚本帮助信息
    --prefix=path：定义应用程序安装路径
    --sbin-path=PATH ：定义应用程序的二进制程序
    --conf-path=PATH ：定义应用程序配置文件路径
    --enable--xxx：开启某项功能（如应用程序支持该功能，但默认不安装）
    --with--xxx：开启某项功能（如应用程序支持该功能，但默认不安装）
    --without--xxx：关闭某项功能（如应用程序支持该功能，默认安装，但是我不需要）
    --user=USER：指定应用程序执行的用户
    --group=GROUP：执行应用程序执行的组

    解决configure错误信息
    1. 用without关闭这项功能（不建议使用）
    2. 安装所需的环境，安装所需环境的开发包

3. 执行make ：定义Makefile按照哪种顺序去编译源程序
    -j N：多线程编译（速度快）

4. make install ：安装应用程序

//编译安装完成后工作：
1:添加应用程序的二进制程序到系统路径:系统查找$PATH
    1.1:为二进制程序做链接文件
        # 1n -s /usr/ local/tengine/sbin/*  /usr/sbin
        # ln -s /usr/local/tengine/sbin  /usr/sbin/tengine
    1.2:修改/etc/profile文件
    1.3:在/etc/profile.d/目录中建立name.sh的文件
2:添加应用程序的库文件到系统库文件路径:库文件:/usr/lib  /usr/1ib64
    2.1:为库文件做链接文件
        # ln -s /usr/local/APP_NAME/lib/*  /use/lib
        # ln -s /usr/local/APP_NAME/lib   /usr/lib/APP_NAME
    2.2:在 /etc/ld.so.conf.d/ 目录下建立APP_NAME.conf，把应用程序的库文件位置添加进去
        # ldconfig
          -v ：显示加载库文件的过程
3:添加应用程序的头文件到系统头文件路径:系统头文件:  /usr/include
    3.1:为头文件做链接文件
        # ln -s /usr/local/APP_NAME/include/*   /usr/include
        # ln -s /usr/local/APP_NAME/include   /usr/include/APP_NAME
4:添加应用程序的帮助信息
    4.1:  man -M PATH bin_name   :-M 指定帮助信息的位置
    4.2:  man配置文件：系统默认帮助：/usr/share/man/
        centos6:: /etc/man.config   添加:MANPATH [HELP_PATH]
        centos7:: /etc/man_db.conf  添加:MANPATH_MAP [HELP_PATH]
</code></pre><h3 id="8-进程管理"><a href="#8-进程管理" class="headerlink" title="8. 进程管理"></a>8. 进程管理</h3><h4 id="8-1-进程的概念"><a href="#8-1-进程的概念" class="headerlink" title="8.1 进程的概念"></a>8.1 进程的概念</h4><p>进程：应用程序或者数据在系统中按照顺序执行的活动过程，是操作系统架构基础；</p>
<p><strong>本小节内容请学习操作系统原理</strong>，如已学习，可跳过不看</p>
<p>OS = kernel + process：进程只能运行在CPU和内存中</p>
<p>进程特性 ：动态性   并发性等</p>
<p>CPU分环运行：</p>
<ul>
<li>0环：特权环，运行内核  （内核空间）</li>
<li>1-2 环：库文件</li>
<li>3环 ：进程环（用户空间）</li>
</ul>
<p>CPU一个时间点只能运行一个程序，按照时间片</p>
<p>例：mkdir：  mkdir  /data ：system call ：系统   I/O</p>
<pre><code>task struck：进程的数据结构（存放在内核中）

task struce结构：状态  进程信息和内核栈  运行列表（指令等）  MM（内存管理单元）

PID ：进程ID号   群组信息   用户信息  文件系统  文件描述符等
</code></pre><p> MMU：memory mangement unit ：内存管理单元</p>
<p>context switch ：进程切换，上下文切换</p>
<p>![](F:\Individual File\于召勇\typora note\Linux及编程\image-linux\进程.png)</p>
<p>进程内存结构：forbidden：内核空间</p>
<p>program text：指令</p>
<p>data+bss：全局变量</p>
<p>heap：堆空间</p>
<p>shared library ：共享库</p>
<p>stack：栈空间，进程运行时调用的数据</p>
<p>thread：线程，轻量级进程</p>
<p>运行进程的模式：多进程模式（每一个请求生成一个进程：进程切换）<br>单进程多线程：每个线程去响应</p>
<p>lock：死锁，自旋锁等</p>
<p>kernel ：内存管理  网络管理   安全管理   驱动管理   进程管理等</p>
<p>进程：父子关系   进程状态  优先级</p>
<p>进程优先级：0-139 数字，共140个优先级</p>
<ul>
<li><p>0-99  :系统优先级（用户不可控优先级）</p>
</li>
<li><p>100-139：nice值（用户可控优先级）；-20 到19；</p>
</li>
<li><p>root用户可以调整nice值；普通用户只能调0-19</p>
</li>
</ul>
<p>高优先级进程：获取更多的CPU运行时长，更优先的让CPU执行</p>
<p>大O标准：O(1)  O(n)  O(logn) O(2^n)  O(n^2)</p>
<h4 id="8-2-进程管理命令"><a href="#8-2-进程管理命令" class="headerlink" title="8.2 进程管理命令"></a>8.2 进程管理命令</h4><p>进程分类：</p>
<p>​            和终端相关的进程：用户进程</p>
<p>​            和终端无关的进程：内核进程</p>
<h5 id="8-2-1-ps"><a href="#8-2-1-ps" class="headerlink" title="8.2.1  ps"></a>8.2.1  <code>ps</code></h5><p> process status :进程状态查看，运行ps那个时刻系统进程状态；</p>
<p>BSD风格(不使用连字符)，sys V风格使用连字符)，GNU长选项(使用两个连字符)</p>
<ul>
<li>a：显示和终端有关的进程</li>
<li>u：显示进程用户的信息</li>
<li>x：显示和终端无关的进程</li>
<li>-e：显示所有进程信息</li>
<li>-l：显示进程长格式</li>
<li>-F：显示进程的完整信息</li>
</ul>
<pre><code>// 命令：ps au   //数据格式解析
USER:该进程是有哪个用户发起的
PPID:父进程号
PID:进程号/proc目录存放着进程相关的信息。
            在CentoS7中PID为1的进程是systemd
            在CentOS6中PID为1的进程是init进程
%CPU:该进程占用的CPU百分比
%MEM:该进程占用内存的百分比
VSZ:虚拟内存集（计算进程所占物理内存时，物理内存包括共享库的空间）
RSS:常驻内存集（进程中不能被交换出去的）
TTY:运行在哪个终端
STAT:进程状态
            D:不可中断睡眠状态
            S:可中断睡眠状态
            R:运行状态
            T:停止状态
            z:僵尸状态
            s:session leader （会话的领导者）
            &lt;:优先级较高的进程(用户不可控)
            N:优先级较低的进程(用户可控进程)
            1:多线程进程
            L:在内存中锁定分页
            +:前台进程组中的进程

START:进程启动时间
TIME:该进程在CPU中实际运行的时长
COMMAND:该进程命令名称

//ps -elF :结果解析
//部分解析在上面已经介绍，不再重复，仅介绍几个常用的。
    PRI ：系统分配的优先级（用户不可更改）
    NI：nice值
//调整进程的nice值的命令：
    调整正在运行进程nice，（调整nice值就是为了影响系统优先级）
        renice [nice number]  PID
    指定进程运行的nice值（让某个&#39;命令&#39;以指定nice运行）
        nice  -n  [nice_number]  COMMAND</code></pre><h5 id="8-2-2-top"><a href="#8-2-2-top" class="headerlink" title="8.2.2  top"></a>8.2.2  <code>top</code></h5><pre><code>//top结果解析
第一行：当前系统时间   系统运行时长   登录系统的用户个数  过去1分钟，5分钟，15分钟平均负载
第二行：进程总数  正在运行的进程数   睡眠的进程数  停止状态进程数  僵尸状态进程数
第三行：CPU相关信息（按1键可查看每个CPU的信息）：us:用户进程所占CPU百分比  sy:系统进程所占CPU百分比  ni:nice所占CPU百分比  id:空闲进程所占CPU百分比  hi:硬件中断所占CPU百分比  si:软件中断所占CPU百分比  st:被hypervisor偷走的CPU的百分比
第四行：物理内存相关信息
第五行：交换分区相关信息 

top交互式命令：
    M:按所占内存百分比进行排序
    P:按所占CPU百分比进行排序
    T:按进程运行时长进行排序
    c:是否显示command这一列的完整路径
    l:是否显示top第一行
    t:是否显示top第二行和第三行
    m:是否显示内存的相关信息
    k:杀死某个进程
    q:退出top进程</code></pre><h5 id="8-2-3-其他相关命令"><a href="#8-2-3-其他相关命令" class="headerlink" title="8.2.3  其他相关命令"></a>8.2.3  其他相关命令</h5><ul>
<li><p><code>pstree</code>：查看进程树</p>
</li>
<li><p><code>pgrep</code>   ：查看某个进程的PID 号 pgrep  process_name</p>
</li>
<li><p><code>pidof</code>    ：查看某个进程的PID 号 pidof  process_name</p>
</li>
<li><p><code>kill</code>      ：杀死某个进程（向进程传递某个信号）</p>
<ul>
<li>kill -l  ：查看信号列表</li>
<li>信号列表（ 信号：进程间的通信 IPC ）<ul>
<li>1：SIGHUP ：不停止服务的情况下，重新读取配置文件，并且应用配置文件中的设置</li>
<li>2：SIGINT：（Ctrl+C）：中断某个进程</li>
<li>9：SIGKILL：强制杀死某个进程</li>
<li>15：SIGTERM：终止某个进程（默认信号）</li>
</ul>
</li>
<li>kill 语法：<ul>
<li>kill  - sig_number  PID</li>
<li>kill  - sig_name   PID </li>
<li>kill  %number   ：杀死后台某个作业，%不能省略</li>
</ul>
</li>
</ul>
</li>
<li><p><code>killall</code> ：杀死整个进程树，用法同kill</p>
</li>
</ul>
<ul>
<li><p>前台进程：利用终端执行的进程</p>
</li>
<li><p>后台进程：运行执行时不利用终端进行执行的进程</p>
</li>
<li><p>前台 ——&gt;  后台：（前台调入后台）</p>
<ul>
<li>Ctrl+z：把正在运行的进程调入后台，并停止运行</li>
<li><code>&amp;</code>：启动时直接调入后台运行</li>
</ul>
</li>
</ul>
<ul>
<li><p><code>jobs</code>：查看后台运行的作业</p>
<ul>
<li><code>+</code> ：下一次将要运行</li>
<li><code>-</code>：下一次将要运行的第二个后台作业</li>
<li><code>kill  %1</code>：杀死后台运行号为1的进程（注意加%）</li>
</ul>
</li>
<li><p><code>bg</code>：把进程调入后台继续运行</p>
</li>
<li><p><code>fg</code>：把后台进程调入前台继续运行  ‘fg  num’</p>
</li>
</ul>
<h3 id="9-任务计划"><a href="#9-任务计划" class="headerlink" title="9. 任务计划"></a>9. 任务计划</h3><h4 id="9-1-一次性任务计划"><a href="#9-1-一次性任务计划" class="headerlink" title="9.1 一次性任务计划:"></a>9.1 一次性任务计划:</h4><h5 id="9-1-1-at"><a href="#9-1-1-at" class="headerlink" title="9.1.1 at"></a>9.1.1 at</h5><ul>
<li><code>at</code>：设置系统在某一个时间点执行的任务，执行结果以邮件的方式发送给任务发起者</li>
<li>语法:</li>
</ul>
<pre><code># at data_time
at&gt;at_command1
at&gt;at_command2
at&gt;ctrl+d  //保存退出

//注意：at任务计划需要atd服务的支持，atd服务开启方法
# systemctl start atd
# systemctl enable atd
# systemctl status atd

//Linux中设置at任务后，会在/var/spool/at/目录生成at任务计划的文件，按照文件名的排序顺序执行
</code></pre><ul>
<li>data_time时间日期写法：</li>
</ul>
<pre><code>    绝对时间：
        HH:MM:具体时间
        DD.MM.YY：天.月.日
        YY-MM-DD：年-月-日
        MM/DD/YY：月/日/年
        HH:MM YY-MM-DD
    相对时间：
        at now+3minutes：从任务计划创建时间开始的3分钟后执行</code></pre><ul>
<li>相关文件：<ul>
<li>/etc/at.allow  ：at任务计划的白名单，仅允许此文件中的用户执行at</li>
<li>/etc/at.deny ：at任务计划的黑名单，仅拒绝次文件中的用户执行at</li>
<li>系统先查找/etc/at.allow，再去查找/etc/at.deny，如果两个文件都没有，只有root用户能执行</li>
</ul>
</li>
<li><code>at</code>命令的相关参数：<ul>
<li>-l：查看系统中at任务列表，相当于atq</li>
<li>-r：删除系统中的at列表，相当于atrm</li>
<li>-d：删除系统中的at列表，相当于atrm</li>
<li>-c：列出后续at任务的具体指令内容</li>
</ul>
</li>
</ul>
<h5 id="9-1-2-batch"><a href="#9-1-2-batch" class="headerlink" title="9.1.2  batch"></a>9.1.2  batch</h5><p>用法与at相同，不过batch任务计划是在CPU空闲时执行，但CPU的负载小于0.8时执行batch设定的任务</p>
<ul>
<li>语法：与at基本一致，请查看at的语法和时间格式</li>
<li>uptime：查看CPU平均负载</li>
</ul>
<h4 id="9-2-周期性任务计划"><a href="#9-2-周期性任务计划" class="headerlink" title="9.2  周期性任务计划"></a>9.2  周期性任务计划</h4><h5 id="9-2-1-系统周期性任务"><a href="#9-2-1-系统周期性任务" class="headerlink" title="9.2.1 系统周期性任务"></a>9.2.1 系统周期性任务</h5><ul>
<li>日志轮换：logrotate</li>
<li>登录文件分析：logwatch</li>
<li>创建located数据库：</li>
<li>创建man帮助信息数据库：centos6：makewathis，centos7：mandb</li>
<li>RPM软件登录文件的创建</li>
<li>与网络相关的分析行为</li>
</ul>
<h5 id="9-2-2-用户周期性任务"><a href="#9-2-2-用户周期性任务" class="headerlink" title="9.2.2 用户周期性任务"></a>9.2.2 用户周期性任务</h5><ul>
<li>cron：设置周期性任务计划</li>
<li>anacron：当cron周期性任务由于某种原因没有执行，anacron重新执行cron任务</li>
</ul>
<h6 id="1-cron：设置周期性任务计划"><a href="#1-cron：设置周期性任务计划" class="headerlink" title="1.cron：设置周期性任务计划"></a>1.cron：设置周期性任务计划</h6><p>crond服务开启：</p>
<pre><code># systemctl start crond
# systemctl enable crond
# systemctl status crond</code></pre><p>相关文件：</p>
<ul>
<li>/etc/cron.allow  ：cron任务计划的白名单</li>
<li>/etc/cron.deny ：cron任务计划的黑名单，系统默认情况下保留黑名单</li>
<li>/etc/crontab：cron配置文件解析：</li>
</ul>
<pre><code>SHELL=/bin/bash   //各任务计划执行使用的shell程序
PATH=/sbin:/bin:/usr/sbin:/usr/bin  //PATH路径
MAILTO=root    //
</code></pre><ul>
<li>/etc/cron.d：cron辅助配置文件目录（里面放的是脚本）</li>
<li>cron.hourly：由cron工具去执行</li>
<li>cron.daily   cron.weekly    cron.monthly  是由anacron工具去执行</li>
</ul>
<ul>
<li>/var/spool/cron：用户cron任务计划的配置文件，Linux用户设置完cron任务后，会在/var/spool/cron目录下生成以用户名名称的cron文件</li>
</ul>
<p><code>crontab</code>命令：<strong>设置/查看/删除cron任务计划</strong>，执行结果用邮件发送</p>
<ul>
<li>-e：编辑cron任务内容</li>
<li>-u：为指定用户设置cron任务计划（只有root用户能使用）</li>
<li>-l：查看cron任务列表  （/etc/crontab）</li>
<li>-r：删除所有的cron列表</li>
</ul>
<p>设置cron任务时间语法：</p>
<ul>
<li>系统设置：<ul>
<li>分   时   日   月   周   用户   命令</li>
</ul>
</li>
<li>用户设置：<ul>
<li>分   时   日   月   周   命令</li>
</ul>
</li>
<li>时间取值范围：<ul>
<li>分钟：0-59</li>
<li>小时：0-23</li>
<li>日期：1-31</li>
<li>月：1-12 （英文缩写也可以）</li>
<li>周：0-7（0和7都代表周日）（英文缩写也可以）</li>
<li><code>*</code> 代表任意</li>
<li>离散时间段： <code>,（逗号）</code><ul>
<li>5,15,30,45,56  17  *  *  *  cat  /etc/fstab</li>
<li>17点当中的 5分，15分，30分，45分，56分执行这个命令</li>
</ul>
</li>
<li>连续时间段：<code>-</code>（中横线）<ul>
<li>00  23  *  *  1-5  cat  /etc/fstab</li>
<li>周一到周五，每天23点00执行这个命令</li>
</ul>
</li>
<li>间隔时间段：<code>*/n</code> <ul>
<li>*/5  *  *  *  *   cat  /etc/fstab</li>
<li>每隔5分钟执行一次</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>cron设置任务计划时注意事项：</p>
<ul>
<li>CPU和内存资源集中使用时的问题</li>
</ul>
<pre><code># vim  /etc/crontab
1,6,11,16,21,26,31,36,41,46,51,56  * * * * root command1</code></pre><ul>
<li>取消一些不必要的输出：设置命令时可以重定向输出</li>
<li>时间的检验：设置时间时，周与日月不可并存</li>
<li>安全的检验：借由 /var/log/cron 的内容查看cron任务计划中是否有非法任务</li>
<li>环境变量：系统命令查找和cron任务命令位置由$PATH变量决定，设置cron任务时，使用<strong>命令的绝对路径</strong></li>
</ul>
<h6 id="2-anacron：当cron周期性任务由于某种原因没有执行，anacron重新执行cron任务"><a href="#2-anacron：当cron周期性任务由于某种原因没有执行，anacron重新执行cron任务" class="headerlink" title="2.anacron：当cron周期性任务由于某种原因没有执行，anacron重新执行cron任务"></a>2.anacron：当cron周期性任务由于某种原因没有执行，anacron重新执行cron任务</h6><ul>
<li>语法：</li>
</ul>
<pre><code>anacron [options] [job]
    -s : 依据时间记录文件去判断是否执行
    -f : 强制执行
    -n : 立刻执行为运行的任务，不需要延时</code></pre><ul>
<li>相关文件：<ul>
<li>/etc/anacrontab    //该文件具体内容在Linux中查看</li>
<li>/var/spool/anacron</li>
</ul>
</li>
<li>执行流程：<ul>
<li>1.由/etc/anacrontab 分析到 cron.daily 天数为1天</li>
<li>2.由/var/spool/anacron/cron.daily 取出最近一次执行anacron时间戳</li>
<li>3.由2步骤分析出的时间戳和任务进行比较，查看哪些cron任务超过1天没有执行</li>
<li>4.准备执行指令，根据/etc/crontab的设置，将延时执行</li>
<li>5.延时时间过后，执行指令</li>
</ul>
</li>
</ul>
<h3 id="10-文件查找专题"><a href="#10-文件查找专题" class="headerlink" title="10. 文件查找专题"></a>10. 文件查找专题</h3><h4 id="10-1-常用查找"><a href="#10-1-常用查找" class="headerlink" title="10.1 常用查找"></a>10.1 常用查找</h4><p><code>which</code>：查找命令字所在位置</p>
<p> <code>located</code>：模糊匹配（只要包含关键字的文件都查找出来），不是实时的，基于数据库的查找，updatadb升级locate升级数据库</p>
<h4 id="10-2-find"><a href="#10-2-find" class="headerlink" title="10.2 find"></a>10.2 <code>find</code></h4><ul>
<li><p>功能：查看文件或目录的工具</p>
</li>
<li><p>精确查找</p>
</li>
<li><p>遍历整个指定目录中的文件，速度很慢</p>
</li>
<li><p>支持多种查找条件（属主，属组，权限，文件名等）</p>
</li>
</ul>
<p><strong>语法</strong>：<code>find  [find_path] [条件]  [处理动作]</code></p>
<ul>
<li>find_path：如果不写，默认在当前工作目录查找</li>
<li>条件：如果不写，会查找出该路径下所有的文件</li>
<li>处理动作：默认打印到屏幕上print</li>
</ul>
<p><strong>条件</strong>：（匹配标准）</p>
<ul>
<li><p><strong>-name</strong> file_name  ：根据文件名进行查找，区分大小写</p>
</li>
<li><p>-iname  file_name  ：根据文件名进行查找，不区分大小写</p>
</li>
<li><p><strong>-regex  PATTERN</strong>：根据正则表达式的模式进行查找</p>
</li>
<li><p>-user ：通过属主进行查找</p>
</li>
<li><p>-group：通过数组查找</p>
</li>
<li><p><strong>-uid  UID</strong>：通过UID号查找</p>
</li>
<li><p>-gid  GID：通过gid号查找</p>
</li>
<li><p>-nouser：查找没有属主的文件</p>
</li>
<li><p>-nogroup：查找没有属组的文件</p>
</li>
<li><p>-type：根据文件类型查找（b  c  d  f(文件)  p  s   l  ）</p>
</li>
<li><p>-size   [+ | - ]  ：</p>
<ul>
<li>-size   5k ：精确匹配5k大小的文件</li>
<li><code>+ 5k</code>：匹配大于5k的文件</li>
<li><code>- 5k</code>：匹配小于5k的文件</li>
</ul>
</li>
<li><p>-mtime：时间单位为天，modify时间（后面跟 +  - 号表示 大于小于）</p>
</li>
<li><p><strong>-atime</strong>：时间单位为天，access时间</p>
</li>
<li><p>-ctime：时间单位为天，change时间</p>
</li>
<li><p>-mmin：时间单位为分钟，modify时间</p>
</li>
<li><p>-amin：时间单位为分钟，access时间</p>
</li>
<li><p>-cmin：时间单位为分钟，change时间</p>
</li>
<li><p><strong>-perm  MODE</strong>：(MODE是权限)，精确匹配文件文件权限为MODE的文件</p>
</li>
<li><p><strong>-perm  /MODE</strong>：(MODE是权限)，任意一位匹配</p>
</li>
<li><p><strong>-perm  -MODE</strong>：(MODE是权限)，文件权限能够完全包含此MODE时才能匹配</p>
</li>
<li><p><strong>条件组合</strong>：</p>
<ul>
<li>-a：and 同时满足多个条件，find /tmp/  -user  tom  -a  -perm  644  -ls</li>
<li>-o：or 满足一个条件即可，find /tmp/  -user  tom  -o  -perm  644  -ls</li>
<li>-not  ：不满足条件的被查找出来</li>
</ul>
</li>
</ul>
<p><strong>处理动作</strong>：[action]</p>
<ul>
<li><p>-print：默认动作，默认查找结果打印到屏幕</p>
</li>
<li><p>-ls：默认以  <strong>ls -l</strong>   的形式显示结果信息</p>
</li>
<li><p><code>-ok COMMAND {} \;</code>：执行动作时提示用户是否执行（必须以  <code>\;</code>结尾，<code>{}</code>代表文件占位符）</p>
</li>
<li><p><code>-exec COMMAND {} \;</code>：执行动作时不提示用户，直接执行（要求同上）</p>
</li>
<li><p><strong>注意：使用通配时用引号括起来</strong></p>
</li>
</ul>
<h3 id="11-Linux-启动"><a href="#11-Linux-启动" class="headerlink" title="11. Linux 启动"></a>11. Linux 启动</h3><h4 id="11-1-启动过程"><a href="#11-1-启动过程" class="headerlink" title="11.1 启动过程"></a>11.1 启动过程</h4><p>进程管理：kernel+process<br>CPU：ring0：内核空间    ring1-2：库文件等    ring3：用户空间<br>CPU读取的数据都来自内存<br>内存：内核空间和用户空间，RAM：易失性存储器</p>
<p>PC：Linux启动过程： </p>
<ul>
<li>POST （加电自检（PowerOnSelfTest））—&gt;  BIOS（基本输入输出系统：Basic Input Output System：硬件信息；Boot Sequence ：启动顺序）—&gt;   MBR（主引导记录；446字节BootLoader）—&gt;   启动菜单（Linux启动菜单：GRUB）—&gt;   kernel  —&gt; initramfs（虚拟根文件系统） —&gt;   /sbin/init  </li>
</ul>
<p>kernel作用：（驱动和检测系统外围硬件或程序）文件系统、安全管理、网络管理、进程管理、驱动程序</p>
<p>内核设计：</p>
<ul>
<li>单内核：把所有的功能都集成到内核中去<ul>
<li>Linux使用单内核，模块化设计  /lib   /lib64 </li>
<li>/lib/modules/‘内核版本号为名称的目录’/kernel/   ：内核模块<ul>
<li>arch：平台架构相关</li>
<li>crypto：安全加密</li>
<li>drivers：驱动程序</li>
<li>fs：文件系统</li>
<li>kernel：内核</li>
<li>lib：内核库（.ko）</li>
<li>mm：memory mangement 内存管理</li>
<li>net：系统中TCP/IP协议栈</li>
<li>sound：声卡</li>
<li><strong>modules.dep：解决系统依赖关系</strong></li>
</ul>
</li>
</ul>
</li>
<li>微内核：把每一个功能都做成小模块  （Windows  、Solaris）</li>
</ul>
<p><strong>/boot/initramfs</strong>：centos 6，虚拟根文件系统，把 /sys   /dev   /proc目录复制到根文件系统</p>
<p><strong>/boot/initrd</strong>：centos 5 </p>
<p><strong>Linux运行级别</strong>：0-6</p>
<ul>
<li>0:halt关机</li>
<li>1:单用户模式(root，无须登录)，single，维护模式；</li>
<li>2:多用户模式，会启动网络功能，但不会启动NFS；维护模式；</li>
<li>3: 多用户模式，正常模式；文本界面；</li>
<li>4:预留级别；</li>
<li>5:多用户模式，正常模式；图形界面：GUI</li>
<li>6:重启</li>
</ul>
<p>chroot：改变根文件系统目录</p>
<p>ldd：查看二进制文件所依赖的库文件</p>
<h4 id="11-2-GRUB"><a href="#11-2-GRUB" class="headerlink" title="11.2  GRUB"></a>11.2  GRUB</h4><p>BootLoader：MBR（位于磁盘中0磁道0柱面，512字节），后安装系统的BootLoader会覆盖前一系统的BootLoader，安装双系统时，先安装Linux，再安装Windows</p>
<p>​                Windows：不允许其他系统引导，也不引导其他系统</p>
<p>​                Linux：GRUB：默认的BootLoader</p>
<p>GRUB配置文件 ：/boot/grub/grub.conf 的解释</p>
<pre class=" language-sh"><code class="language-sh">default=0  //默认引导系统
timeout=5  //GRUB引导系统超时时间
splashimage=(hd0,0)/grub/splash.xpm.gz  //引导系统时的图片
hiddenmenu
title CentOS 6 (2.6.32-642.el6.x86_64) 
                            //系统title以及在grub中显示是名称
    root (hd0,0)   //根所在的位置
    kernel /vmlinuz-2.6.32-642.el6.x86_64 ro root=UUID=ef361140-6306-423c-90f0-63a93c664f96 rd_NO_LUKS rd_NO_LVM LANG=en_US.UTF-8 rd_NO_MD SYSFONT=latarcyrheb-sun16 crashkernel=auto EYBOARDTYPE=pc KEYTABLE=us rd_NO_DM rhgb quiet  
    initrd /initramfs-2.6.32-642.el6.x86_64.img


//解释：
//kernel /vmlinuz-2.6.32-220.el6.x86_64 :制定内核文件的位置
//ro: 刚开始以只读方式挂载根文件系统
//root=UUID=ef361140-6306-423c-90f0-63a93c664f96 : root根 分区设备位置
//rd_NO_LUKS LANG=en_US.UTF-8 rd_NO_MD: 为了加速引导启动进程，可以指定磁盘是否加密、语言环境、不启用LVM、RAID、键盘等等，节省dracut查找的时间
//SYSFONT=latarcyrheb-sun16 KEYTABLE=us: 对于有加密磁盘的系统启动，可以指定键盘规格和字体显示等
//quiet:启动过程中只有重要信息显示，类似硬件自检的消息不回显示
//rhgb: RedHat graphics boot,就是会看到图片来代替启动过程中显示的文本信息，这些信息在启动后用dmesg也可以看到
</code></pre>
<p><strong>GRUB分阶段启动</strong>：</p>
<ul>
<li><p>stage1：第一阶段，位于BootLoader，为了引导第二阶段</p>
</li>
<li><p>stage1_5：识别文件系统</p>
</li>
<li><p>stage2：加载启动设置等等，读取配置文件/boot/grub/grub.conf</p>
</li>
</ul>
<p><strong>GRUB修复</strong>：（使用光盘启动（BIOS调启动顺序），选择救援模式）</p>
<pre><code># chroot  /mnt/sysimage
# grub-install  --root-directory=/  /dev/sda    
          //注意：此处写/，是因为boot是一个独立的分区，如果没有独立，就应该写绝对路径，例如 /boot/，/dev/sda是指定第一块磁盘
# grub
grub&gt;  root (hd0,0)       //磁盘0扇区，0柱面
grub&gt;  setup (hd0)
grub&gt;  quit
# vi /boot/grub/grub.conf  //准备（自己写）这个文件，内容及格式与上面的一样
# reboot     //前面的做完了就重启，注意在BIOS中调一下启动顺序</code></pre><p><strong>为GRUB启动菜单添加密码</strong>：</p>
<pre><code>#  grub-crypto  --sha-512    //生成加密密码
#  vim /boot/grub/grub.conf    //在这个文件中hidden menu那一行下添加一行：
  password --encryped  密文   //因为是sha加密，所以使用--encryped，如果是md5加密，应该使用 --md5 密文</code></pre><p><strong>为系统添加启动密码</strong>：</p>
<pre><code>#  grub-md5-crypto     //生成加密密码
#  vim /boot/grub/grub.conf    //在这个文件中title那一行下添加一行：
  password --md5  密文   //因为是md5加密，所以使用--md5</code></pre><h4 id="11-3-kernel、centos6—upstart-init"><a href="#11-3-kernel、centos6—upstart-init" class="headerlink" title="11.3 kernel、centos6—upstart init"></a>11.3 kernel、centos6—upstart init</h4><p><strong>Linux内核与内核模块相关文件及位置</strong>:</p>
<ul>
<li><p>内核: /boot/ vmlinuz-version</p>
</li>
<li><p>initramfs : /boot/ initramfs-kernel_version</p>
</li>
<li><p>内核模块: /lib/modules/kernel_version/kernel</p>
</li>
<li><p>内核源码：/usr/src/kernels/kernel_version</p>
</li>
<li><p>内核版本：/proc/version</p>
</li>
<li><p>系统内核功能：/proc/sys/kernel/</p>
</li>
</ul>
<p>Linux关于内核的命令：</p>
<ul>
<li>lsmod：查看系统中加载的内核模块<ul>
<li>结果解释：</li>
<li>module：模块名称</li>
<li>size：模块大小</li>
<li>userd  by：此模块是否被其他模块使用（依赖关系）</li>
</ul>
</li>
<li>depmod ：更新模块的依赖关系并创建依赖关系文件<ul>
<li>/lib/modules/kernel_version/modules.dep：解决依赖关系的文件</li>
<li>-A ：查找比/lib/modules/kernel_version/modules.dep新的模块，如果有，才会更新，并写入该文件</li>
<li>-n：不写入依赖关系，直接输出到屏幕上</li>
<li>-e：显示当前系统中已经加载的但不可执行的模块名称</li>
</ul>
</li>
<li>modinfo：查看模块的信息<ul>
<li>modinfo  modules_name </li>
</ul>
</li>
<li>insmod：加载模块<ul>
<li>insmod  modules_name_full_path</li>
</ul>
</li>
<li>rmmod：删除模块<ul>
<li>rmmod  模块名称</li>
</ul>
</li>
<li>modprobe：加载删除模块<ul>
<li>-c：列出目前系统中所有的模块</li>
<li>-l：列出/1ib/modules/2.6.32-642.e16. x86_64/kernel当中所有模块的完整文件名</li>
<li>-f：强制加载</li>
<li>-r：删除某个模块，类似于rmmod</li>
</ul>
</li>
</ul>
<p>Linux内核模块额外的参数设置目录: /etc/modprobe .d/</p>
<p>Linux启动时所用的重要的目录:/etc/sysconfig</p>
<p><strong>init</strong>：</p>
<p>upstart：CentOS 6：采用时间驱动（event driven），把功能并行执行</p>
<pre><code>CentOS6上面Upstart大致的一个启动过程: 
1.内核启动init，读取配置文件，在CentOS 6中只定义了运行级别
2.系统初始化:( /etc/init/rcS.conf exec /etc/rc.d/rc.sysinit )
3. init找到/etc/inittab文件，确定默认的运行级别(X) ( /etc/init/rcS.conf exec telinit$runlevel)
4.触发相应的runleve1事件(/etc/init/rc.conf exec /etc/rc.d/rc $RUNLEVEL)
5.开始运行/etc/rc.d/rc,传入参数X
6./etc/rc.d/rc脚本进行一系列设置，最后运行相应的/etc/rcX. d/中的脚本
7./etc/rcX.d/中的脚本按事先设定的优先级依次启动
8.最后执行/etc/rc.d/rc.local
9.加载终端或X-Window接口
</code></pre><p>/etc/init目录：定义了系统初始化的配置文件</p>
<p>/proc/cmdline : 系统内核设置的参数</p>
<p>/etc/rc.d/rc.sysinit : 系统初始化主要配置文件</p>
<p>/etc/init/rc . conf:sysv运行级别</p>
<p>/etc/rc.d/存放每个运行级别所需要的服务，比如/etc/rc.d/rc3.d/目录定义的运行级别3所需要的服务<br>命名:<br>                K+数字+服务名</p>
<p>​                S+数字+服务名</p>
<p>​                K：kill结束进程</p>
<p>​                S：start开启服务</p>
<p>​                数字：代表启动的优先级</p>
<p>/etc/rc.d/rc.local：系统启动加载的最后一个脚本(用户的脚本)</p>
<p>sys  v  init  chkconfig : 定义系统服务在每个级别的运行状态<br>                –list:查看系统中所有服务的状态<br>                chkconfig –level 2345 httpd on<br>                chkconfig –level 2345 httpd off<br>upstart : initctl<br>服务分类:<br>            独立服务:应用程序自己控制<br>            超级服务:依赖于xineted进程来管理</p>
<p><strong>控制服务</strong>：service service_name   start | stop | restart | reload | status</p>
<h4 id="11-4-CentOS系统详解—systemd"><a href="#11-4-CentOS系统详解—systemd" class="headerlink" title="11.4 CentOS系统详解—systemd"></a>11.4 CentOS系统详解—systemd</h4><p> <strong>systemd特性</strong>：</p>
<ol>
<li><p>平行处理所有服务，加速开机流程：旧的init启动脚本是一项一项任务依序启动的模式，因此不相依的服务也是得要一个一个的等待。systemd可以让所有的服务同时启动，因此系统启动的速度变快了</p>
</li>
<li><p>一经要求就回应的on-demand启动方式：<br>systemd全部就是仅有一只systemd服务搭配systemctl指令来处理，无须其他额外的指令来支援。不像systemV还要init, chkconfig, service…等等指令.此外，systemd由于常驻存储器，因此任何要求(on-demand)都可以立即处理后续的daemon启动的任务</p>
</li>
<li><p>服务相依性的自我检查:<br>由于systemd可以自订服务相依性的检查，因此如果B服务是架构在A服务上面启动的，那当你在没有启动A服务的情况下仅手动启动B服务时，systemd会自动帮你启动A服务！</p>
</li>
<li><p>按照daemon功能分类：</p>
<p>systemd管理的服务非常多，首先systemd先定义所有的服务为一个服务单位(unit)，并将该unit归类到不同的服务类型(type)去。systemd将服务单位(unit)区分为service, socket , target , path, snapshot, timer等多种不同的类型(type),方便管理员的分类与记忆</p>
</li>
<li><p>将多个daemons集合成为一个群组：</p>
<p>如同systemV的init里头有个runlevel的特色，systemd亦将许多的功能集合成为一个所谓的target项目，这个项目主要在设计操作环境的建置，所以是集合了许多的daemons，也就是执行某个target就是执行好多个daemon的意思！</p>
</li>
<li><p>向下兼容旧有的init服务脚本：基本上，systemd是可以兼容于init的启动脚本的，因此，旧的init启动脚本也能够透过systemd来管理，只是更进阶的systemd功能就没有办法支援就是了</p>
</li>
<li><p>systemd有些地方无法完全取代init！包括：在runlevel的对应上，大概仅有runlevel1,3,5有对应到systemd的某些target类型而已，没有全部对应；</p>
</li>
<li><p>全部的systemd都用systemctl这个管理程序管理，而systemctl支援的语法有限制，不像/etc/init.d/ daemon就是纯脚本可以自订参数，systemctl不可自订参数；</p>
</li>
</ol>
<p>Systemctl是一个systemd工具，主要负责控制systemd系统和服务管理器。Systemd是一个系统管理守护进程、工具和库的集合，用于<strong>取代SystemV</strong>初始进程。</p>
<p><strong>Systemd的功能</strong>是<strong>用于集中管理和配置类UNIX系统</strong>.<br>在L inux生态系统中，Systemd被部署到了大多数的标准Linux发行版中，只有为数不多的几个<br>发行版尚未部署.Systemd通常是所有其它守护进程的父进程，但并非总是如此.</p>
<h5 id="11-4-1-CentOS-7-启动流程"><a href="#11-4-1-CentOS-7-启动流程" class="headerlink" title="11.4.1  CentOS 7 启动流程"></a>11.4.1  CentOS 7 启动流程</h5><ul>
<li><p># lsinitrd /boot/initramfs-3.10.0-1101.el7.x86_64.img   //查看虚根文件系统</p>
</li>
<li><p>在内核载入完毕、进行完硬件侦测与驱动程序载入后，内核会启动第一个进程systemd，systemd最主要的功能就是准备软件执行的环境，包括系统的主机名称、网络设定、语言设置、文件系统及其他服务的启动。而 所有的动作都会通过systemd 的预设启动服务集合/etc/systemd/system/default.target设定。另外， systemd 已经舍弃沿用多年的system V的runlevel ! </p>
</li>
<li><p>常见的操作环境target 与兼容于runlevel 的等级可以作为预设的操作环境(default. target)的主要项目有: multi-user.target 以及graphical.target这两个。当然还有rescue.target, emergency.target, shutdown.target等等，以及initrd.target!但是过去的systemV 使用的是一个称为runlevel (执行等级)的概念来启动系统的，systemd 为了兼容于旧式的systemV 操作行为，所以也将runlevel与操作环境做个结合！你可以使用底下的方式来查询两者间的对应关系</p>
</li>
</ul>
<pre><code># 11 -d /usr/lib/systemd/system/runlevel*.target 
# yum -y install bash-completion     //可以补齐参数或选项
# systemctl list-dependencies graphical.target    //查看启动依赖关系
# systemctl list-dependencies multi-user.target   //查看字符界面依赖关系</code></pre><p><strong>sysinit. target完成的功能</strong>:</p>
<ol>
<li>特殊文件系统装置的挂载:包括dev- hugepages . mount dev -mqueue . mount等挂载服务，主要在挂载跟巨量存储器分页使用与讯息队列的功能。挂载成功后，会在 /dev底下建立/dev/hugepages/ ，/dev/mqueue/ 等目录;</li>
<li>特殊档案系统的启用：包括磁碟阵列、网络磁碟(iscsi)、 LVM档案系统、档案系统对照服务(multipath) 等等，也会在这里被侦测与使用到!</li>
<li>开机过程的讯息传递与动画执行：使用plymouthd 服务搭配plymouth指令来传递动画与讯息</li>
<li>日志式登录档的使用：就是systemd- journald这个服务的启用啊！</li>
<li>载入额外的核心模块：透过/etc/modules -load . d/*.conf档案的设定，让核心额外载入管理员所需要的核心模块！</li>
<li>载入额外的核心参数设定：包括/etc/sysctl.conf以及/etc/sysctl.d/*.conf内部设定！</li>
<li>启动系统的随机数产生器：随机数产生器可以帮助系统进行一些密码加密演算的功能</li>
<li>设定终端机(console) 字形</li>
<li>启动动态装置管理员：就是udevd </li>
</ol>
<p><strong>与sys V兼容的rc.local操作</strong>:</p>
<pre><code># chmod +X /etc/rc.d/rc.local
# systemctl start rc-local
# systemctl enable rc-local</code></pre><p><strong>unit分类</strong>:</p>
<p>.service:一般服务类型(serviceunit):主要是系统服务，包括服务器本身所需要的本机服务以及网络服务</p>
<p>.socket:套接字(socketunit):主要是IPC (Inter-processcommunication)的传输讯息(socketfile)功能.这种类型的服务通常在监控讯息传递的套接字，当有透过此套接字传递讯息来说要连结服务时，就依据当时的状态将该用户的要求传送到对应的daemon,若daemon尚未启动，则启动该daemon后再传送用户的要求.</p>
<p>.target :执行环境类型(targetunit)</p>
<p>.mount :文件系统挂载相关的服务( automountunit/mountunit):例如来自网络的自动挂载、NFS档案系统挂载等与档案系统相关性较高的程序管理.</p>
<p>.path:侦测特定档案或目录类型(pathunit):某些服务需要侦测某些特定的目录来提供队列服务，例如最常见的打印服务，就是透过侦测打印队列目录来启动打印功能!</p>
<p>.timer:循环执行的服务(timerunit) :这个东西有点类似anacrontab ！不过是由systemd主动提供的，比anacrontab更加有弹性!</p>
<p><strong>与systemd的daemon运作过程相关的目录简介</strong>:<br>1./usr/lib/systemd/system/：使用CentoS官方提供的软件安装后，预设的启动脚本设定档都放在这里</p>
<p>2./run/systemd/system/ ：系统执行过程中所产生的服务脚本,这些脚本的优先序要比/usr/lib/ systemd/system/高!</p>
<p>3./etc/systemd/ system/：管理员依据主机系统的需求所建立的执行脚本,其实这个目录有点像以前/etc/rc.d/rc5.d/Sxx之类的功能！执行优先序又比/run/systemd/system/高！</p>
<p>4./etc/sysconfig/*:几乎所有的服务都会将初始化的一些选项设定写入到这个目录下，举例来说，mandb所要更新的manpage索引中，需要加入的参数就写入到此目录下的man-db当中！而网络的设定则写在/etc/sysconfig/network -scripts/这个目录内</p>
<p>5./var/lib/ ：一些会产生资料的服务都会将他的资料写入到/var/lib/目录中.举例来说，数据库管理系统Mariadb的数据库预设就是写入/var/lib/mysql/这个目录下！</p>
<p>6./run/:放置了好多daemon的暂存档，包括lockfile以及PIDfile等等.</p>
<p><strong>systemctl项目简介</strong>:</p>
<p>#cat  /usr/lib/systemd/system/sshd.service</p>
<p>.service大概能够将整个设定分为三个部份，就是：</p>
<p>​    [Unit]：unit本身的说明，以及与其他相依赖daemon的设定，包括在什么服务之后才启动此unit之类的设定值；<br>​    [Service], [Socket], [Timer], [Mount], [Path]..：不同的unit type就得要使用相对应的设定项目.我们拿的是sshd . service来当模板，,所以这边就使用Service来设定.这个项目内主要在规范服务启动的脚本、环境设定档档名、重新启动的方式等等，</p>
<p>​    [Install]:这个项目就是将此unit安装到哪个target里面去的意思!</p>
<p>至于设定档内有些设定规则还是得要说明一下:<br>设定项目通常是可以重复的，例如我可以重复设定两个After在设定档中，不过，后面的设定会取代前面的!因此，如果你想要将设定值归零,可以使用类似[After=」的设定，亦即该项目的等号后面什么都没有，,就将该设定归零了(reset).<br>        如果设定参数需要有「是/否」 的项目(布尔值，boolean)，你可以使用1,yes，true，on代表启动，用0,no,false,off代表关闭!<br>空白行、开头为#或;的那一行，都代表注解！</p>
<p><strong>Unit部分说明</strong>:<br>Description  ：服务的描述信息<br>Documentation  ：提供给管理员的一些帮助文档!提供的文件可以是如下的格式：Documentation=<a href="http://www" target="_blank" rel="noopener">http://www</a>.. .. Documentat ion=man : sshd(8 )Documentation=file:/etc/ssh/sshd_ config<br>After ：说明此unit是在哪个daemon启动之后才启动的意思！基本上仅是说明服务启动的顺序而已，并没有强制要求里头的服务一定要启动后此unit才能启动。以sshd.service的内容为例，该服务提到After后面有network.target以及sshd-keygen.service,但是若这两个unit没有启动而强制启动sshd.service的话，那么sshd.service应该还是能够启动的！这与Requires的设定是有差异的!<br>Before  ：与After的意义相反，是在什么服务启动前最好启动这个服务的意思，不过这仅是规范服务启动的顺序，并非强制要求的意思<br>Requires  ：明确的定义此unit需要在哪个daemon启动后才能够启动!就是设定依赖服务啦！如果在此项设定的前导服务没有启动，那么此unit就不会被启动！<br>Wants  ：与Requires刚好相反，规定的是这个unit之后最好还要启动什么服务比较好的意思！不过，并没有明确的规定就是了!主要的目的是希望建立让使用者比较好操作的环境。因此，这个Wants后面接的服务如果没有启动，其实不会影响到这个unit本身！<br>Conflicts  ：代表冲突的服务！也就是这个项目后面接的服务如果有启动，那么我们这个unit本身就不能启动!<br>我们unit有启动，则此项目后的服务就不能启动！</p>
<p><strong>[Service]部分说明</strong>:<br>Type:说明这个daemon启动的方式，会影响到ExecStart！一般来说，有底下几种类型：</p>
<p>simple：预设值，这个daemon主要由ExecStart接的指令串来启动，启动后常驻于存储器中.<br>forking：由ExecStart启动的程序透过spawns延伸出其他子程序来作为此daemon的主要服务.原生的父程序在启动结束后就会终止运作.传统的unit服务大多属于这种项目，例如httpd这个Www服务，当httpd的程序因为运作过久因此即将终结了，则systemd会再重新生出另一个子程序持续运作后,再将父程序删除.<br>oneshot：与simple类似，不过这个程序在工作完毕后就结束了，不会常驻在存储器中，<br>dbus：与simple类似，但这个daemon必须要在取得一个D-Bus的名称后，才会继续运作！因此设定这个项目时，通常也要设定BusName=才行!<br>idle：与simple类似，意思是,要执行这个daemon必须要所有的工作都顺利执行完毕后才会执行.这 类的daemon通常是开机到最后才执行即可的服务！比较重要的项目大概是simple, forking 与oneshot 了！毕竟很多服务需要子程序(forking)，而有更多的动作只需要在开机的时候执行次(oneshot) ，例如文件系统的检查与挂载啊等等的。</p>
<p>EnvironmentFile：可以指定启动脚本的shell环境!例如sshd.service 的设定档写入到/etc/sysconfig/sshd 当中！你也可以使用Environment= 后面接多个不同的Shell变量来给予设定！<br>ExecStart：就是实际执行此daemon的指令或脚本程序。你也可以使用ExecStartPre (之前)以及ExecStartPost (之后)两个设定项目来在实际启动服务前，进行额外的指令行为。但需要特别注意的是，指令串仅接受「指令参数参数…」的格式，不能接受&lt;，&gt;,&gt;&gt;，|，&amp;等特殊字符，很多的bash 语法也不支援喔！ 所以，要使用这些特殊的字符时，最好直接写入到指令脚本里面去！不过，上述的语法也不是完全不能用，亦即，若要支援比较完整的bash 语法，那你得要使用Type=oneshot 才行喔！其他的 Type不支持这些字符</p>
<p>ExecStop：与systemctl stop 的执行有关，关闭此服务时所进行的指令。<br>Restart：当设定Restart=1 时，则当此daemon服务终止后，会再次的启动此服务。举例来说，如果你在tty2使用文字界面登入，操作完毕后登出，基本上，这个时候tty2 就已经结束服务了。但是你会看到荧幕又立刻产生一个新的tty2 的登入画面等待你的登入！那就是Restart的功能！除非使用systemctl强制将此服务关闭，否则这个服务会源源不绝的一直重复产生！</p>
<p>RemainAfterExit：当设定为RemainAfterExit=1 时，则当这个daemon所属的所有程序都终止之后，此服务会再尝试启动。这对于Type=oneshot 的服务很有帮助！</p>
<p>TimeoutSec：若这个服务在启动或者是关闭时，因为某些缘故导致无法顺利「正常启动或正常结束」的情况下，则我们要等多久才进入「强制结束」的状态！</p>
<p>KillMode：可以是process, control-group ，none的其中一种，如果是process 则daemon终止时，只会终止主要的程序(ExecStart 接的后面那串指令)，如果是control -group时，则由此daemon 所产生的其他control-group的程序也都会被关闭，如果是none的话，则没有程序被关闭</p>
<p>RestartSec：与Restart有点相关性，如果这个服务被关闭，然后需要重新启动时，大概要sleep 多少时间再重新启动的意思。预设是100ms(亳秒)。</p>
<p><strong>Install部分说明</strong>：</p>
<p>WantedBy:这个设定后面接的大部分是*.target unit ！意思是，这个unit本身是附挂在哪一个target unit 底下的！一般来说，大多的服务性质的unit都是附挂在multi-user.target 底下!</p>
<p>Also:当目前这个unit 本身被enable 时，Also 后面接的unit也请enable的意思!也就是具有相依性的服务可以写在这里呢!<br>Alias:进行一个连结的别名的意思！当systemctl enable相关的服务时，则此服务会进行连结档的建立！以multi -user. target为例，这个家伙是用来作为预设操作环境default.target的规划，因此当你设定用成default.target时，这个/etc/systemd/system/default.target就会链接到/usr/lib/systemd/system/multi-user.target !</p>
<h5 id="11-4-2-systemctl命令详细使用说明"><a href="#11-4-2-systemctl命令详细使用说明" class="headerlink" title="11.4.2 systemctl命令详细使用说明:"></a>11.4.2 <strong>systemctl命令详细使用说明:</strong></h5><p>1.首先检查你的系统中是否安装有systemd并确定当前安装的版本</p>
<pre><code># systemd  --version</code></pre><p>2.检查systemd和systemctl的二进制文件和库文件的安装位置，</p>
<pre><code># whereis systemd

# whereis systemctl</code></pre><p>3.检查systemd是否运行</p>
<pre><code>#ps - eaf | grepsys temd</code></pre><p>注意：systemd是作为父进程(PID=1) 运行的。在上面带(-e)参数的ps命令输出中，选择所有进程，(-a)选择除会话前导外的所有进程,并使用(-f)参数输出完整格式列表(即-eaf)</p>
<p>4.分析systemd启动进程</p>
<pre><code># systemd-analyze</code></pre><p>5.分析启动时各个进程花费的时间</p>
<pre><code># systemd-analyzeblame</code></pre><p>6.分析启动时的关键链</p>
<pre><code># systemd-analyzecritical-chain</code></pre><p>7.列出所有可用单元</p>
<pre><code># systemctl list-unit-files</code></pre><p>8.列出所有运行中单元</p>
<pre><code># systemctl list-units</code></pre><p>9.列出所有失败单元</p>
<pre><code># systemctl --failed</code></pre><p>10.检查某个单元(如cron. service)是否开机自启</p>
<pre><code># systemctl is-enabled crond.service</code></pre><p>11.检查某个单元或服务是否运行</p>
<pre><code># systemctl status firewalld.service</code></pre><p><strong>使用Systemct1控制并管理服务</strong></p>
<p>12.列出所有服务(包括启用的和禁用的)</p>
<pre><code># systemctl list-unit-files  --type=service</code></pre><ol start="13">
<li>Linux中如何启动、重启、停止、重载服务以及检查服务(如httpd.service)状态</li>
</ol>
<pre><code># systemctl start httpd.service
# systemctl restart httpd.service
# systemctl stop httpd.service
# systemctl reload httpd.service
# systemctl status httpd.service</code></pre><p>注意：当我们使用systemctl的start，restart, stop和reload命令时，我们不会从终端获取到任何输出内容，只有status命令可以打印输出。</p>
<p>14.如何激活服务并在启动时启用或禁用服务(即系统启动时自动启动服务)</p>
<pre><code># systemctl is-active httpd.service
# systemctl enable httpd.service
# systemctl disable httpd.service</code></pre><p>15.如何屏蔽(让它不能启动)或显示服务( 如httpd. service)</p>
<pre><code># systemctl mask httpd.service
# systemctl unmask httpd.service</code></pre><p>16.使用systemctl命令杀死服务</p>
<pre><code># systemctl kill httpd
# systemctl status httpd</code></pre><p><strong>使用systemctl 控制并管理挂载点</strong></p>
<p>17.列出所有系统挂载点</p>
<pre><code># systemctl list-unit-files --type=mount</code></pre><p>18.挂载、卸载、重新挂载、重载系统挂截点并检查系统中挂载点状态</p>
<pre><code># systemctl start tmp.mount
# systemctl stop tmp.mount
# systemctl restart tmp.mount
# systemctl re load tmp.mount
# systemctl status tmp.mount</code></pre><p>19.在启动时激活、启用或禁用挂载点(系统启动时自动挂载)</p>
<pre><code>#systemctl is-active tmp.mount
#systemctl enable tmp.mount
#systemctl disable tmp.mount</code></pre><p>20.在L inux中屏蔽(让它不能启用)或可见挂载点</p>
<pre><code># systemctl mask tmp.mount
# systemctl unmask tmp.mount </code></pre><p><strong>使用 systemctl 控制并管理套接口</strong></p>
<p>21.列出所有可用系统套接口</p>
<pre><code># systemctl list-unit-files --type=socket</code></pre><p>22.在Linux中启动、重启、停止、重载套接口并检查其状态</p>
<pre><code># systemctl start cups.socket
# systemctl restart cups.socket
# systemctl stop cups.socket
# systemctl reload cups.socket 
# systemctl status cups.socket</code></pre><p>23.在启动时激活套接口，并启用或禁用它( 系统启动时自启动)</p>
<pre><code>#systemctl is-active cups.socket
#systemctl enable cups.socket
#systemctl disable cups.socket</code></pre><p>24.屏蔽( 使它不能启动)或显示套接口</p>
<pre><code># systemctl mask cups.socket
# systemctl unmask cups.socket</code></pre><p>25.获取当前某个服务的CPU分配额(如httpd)</p>
<pre><code># systemctl show -p CPUShares httpd.service</code></pre><p>注意:各个服务的默认CPU分配份额=1024,你可以增加/减少某个进程的CPU分配份额.</p>
<p>26.将某个服务( httpd . service)的CPU分配份额限制为2000CPUShares/</p>
<pre><code># systemctl set-property httpd.service CPUShares=2000

# systemctl show -p CPUShares httpd.service</code></pre><p>注意：当你为某个服务设置CPUShares,会自动创建一个以服务名命名的目录(如httpd，service),里面包含了一个名为90-CPUShares.conf的文件，该文件含有CPUShare限制信息,你可以通过以下方式查看该文件:</p>
<pre><code># vim /etc/systemd/system/httpd.service.d/50-CPUShares.conf
[Service]
CPUShares=2000</code></pre><p>27.检查某个服务的所有配置细节</p>
<pre><code># systemctl show httpd</code></pre><p>28.分析某个服务(httpd) 的关键链</p>
<pre><code># systemd-analyze critical-chainhttpd.service</code></pre><p>29.获取某个服务(httpd) 的依赖性列表</p>
<pre><code>#systemctl list-dependencies httpd.service</code></pre><p>30.按等级列出控制组</p>
<pre><code># systemd-cgls</code></pre><p>31.按CPU、内存、输入和输出列出控制组</p>
<pre><code># systemd-cgtop</code></pre><p><strong>控制系统运行等级</strong><br>32.启动系统救援模式</p>
<pre><code># systemctl rescue</code></pre><p>33.进入紧急模式</p>
<pre><code># systemct lemergency</code></pre><p>34.列出当前使用的运行等级</p>
<pre><code># systemctl get-default</code></pre><p>35.启动运行等级5，即图形模式</p>
<pre><code># systemctl isolate runlevel5.target</code></pre><p>或</p>
<pre><code># systemctl isolate graphical.target</code></pre><p>36.启动运行等级3,即多用户模式(命令行)</p>
<pre><code># systemctl set-default runlevel3.target
# systemctl set-default runlevel5.target</code></pre><p>37.重启、停止、挂起、休眠系统或使系统进入混合睡眠</p>
<pre><code># systemctl reboot
# systemctl halt
# systemctl suspend 
# systemctl hibernate 
# systemctl hybrid-sleep</code></pre><hr>
<pre><code>###测试</code></pre>
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="http://blog.aloogu.com" rel="external nofollow noreferrer">kylin</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="http://blog.aloogu.com/2020/03/26/linux/">http://blog.aloogu.com/2020/03/26/linux/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="http://blog.aloogu.com" target="_blank">kylin</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/Linux/">
                                    <span class="chip bg-color">Linux</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">

<div id="article-share">
    
    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
        </div>
    </div>

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2020/03/26/powershell/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/21.jpg" class="responsive-img" alt="Powershell">
                        
                        <span class="card-title">Powershell</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            某天在哔哩哔哩看到了PowerShell的学习视频，学起来呀！
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2020-03-26
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            kylin
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Powershell/">
                        <span class="chip bg-color">Powershell</span>
                    </a>
                    
                    <a href="/tags/Windows/">
                        <span class="chip bg-color">Windows</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                本篇&nbsp;<i class="far fa-dot-circle"></i>
            </div>
            <div class="card">
                <a href="/2020/03/26/linux/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/12.jpg" class="responsive-img" alt="Linux">
                        
                        <span class="card-title">Linux</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            Linux初学者的笔记，满足小编日常使用就可以了
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2020-03-26
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Linux/" class="post-category">
                                    Linux
                                </a>
                            
                            
                        </span>
                    </div>
                </div>

                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Linux/">
                        <span class="chip bg-color">Linux</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>


<script>
    $('#articleContent').on('copy', function (e) {
        // IE8 or earlier browser is 'undefined'
        if (typeof window.getSelection === 'undefined') return;

        var selection = window.getSelection();
        // if the selection is short let's not annoy our users.
        if (('' + selection).length < Number.parseInt('100')) {
            return;
        }

        // create a div outside of the visible area and fill it with the selected text.
        var bodyElement = document.getElementsByTagName('body')[0];
        var newdiv = document.createElement('div');
        newdiv.style.position = 'absolute';
        newdiv.style.left = '-99999px';
        bodyElement.appendChild(newdiv);
        newdiv.appendChild(selection.getRangeAt(0).cloneContents());

        // we need a <pre> tag workaround.
        // otherwise the text inside "pre" loses all the line breaks!
        if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'PRE') {
            newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
        }

        var url = document.location.href;
        newdiv.innerHTML += '<br />'
            + '来源: kylin小小鱼<br />'
            + '文章作者: kylin<br />'
            + '文章链接: <a href="' + url + '">' + url + '</a><br />'
            + '本文章著作权归作者所有，任何形式的转载都请注明出处。';

        selection.selectAllChildren(newdiv);
        window.setTimeout(function () {bodyElement.removeChild(newdiv);}, 200);
    });
</script>


<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


<!-- 代码块折行 -->


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('3'),
            headingSelector: 'h2, h3, h4, h5'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4, h5').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>



    <footer class="page-footer bg-color">
    
    <div class="container row center-align" style="margin-bottom: 15px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            <span id="year">2020</span>
            <a href="http://blog.aloogu.com" target="_blank">kylin</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                class="white-color">57.5k</span>&nbsp;字
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <span id="sitetime">载入运行时间...</span>
            <script>
                function siteTime() {
                    var seconds = 1000;
                    var minutes = seconds * 60;
                    var hours = minutes * 60;
                    var days = hours * 24;
                    var years = days * 365;
                    var today = new Date();
                    var startYear = "2020";
                    var startMonth = "3";
                    var startDate = "26";
                    var startHour = "0";
                    var startMinute = "0";
                    var startSecond = "0";
                    var todayYear = today.getFullYear();
                    var todayMonth = today.getMonth() + 1;
                    var todayDate = today.getDate();
                    var todayHour = today.getHours();
                    var todayMinute = today.getMinutes();
                    var todaySecond = today.getSeconds();
                    var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                    var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                    var diff = t2 - t1;
                    var diffYears = Math.floor(diff / years);
                    var diffDays = Math.floor((diff / days) - diffYears * 365);
                    var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
                    var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) /
                        minutes);
                    var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours -
                        diffMinutes * minutes) / seconds);
                    if (startYear == todayYear) {
                        document.getElementById("year").innerHTML = todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffDays + " 天 " + diffHours +
                            " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    } else {
                        document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffYears + " 年 " + diffDays +
                            " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    }
                }
                setInterval(siteTime, 1000);
            </script>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/lingying177" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:1770824244@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1770824244" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 1770824244" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="/js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("/" + "search.xml", 'searchInput', 'searchResult');
});
</script>
    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    

    

    
    
    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    
	<script src="https://cdn.jsdelivr.net/gh/Yafine/cdn@3.1.4/source/js/click_show_text.js" type="module"></script>
    

</body>

</html>
